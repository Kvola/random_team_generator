<odoo>
    <record id="menu_inscription_ebng" model="website.menu">
        <field name="name">S'inscrire</field>
        <field name="url">/inscription</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">50</field>
    </record>
    <record id="menu_church_list" model="website.menu">
        <field name="name">Liste des églises</field>
        <field name="url">/eglises</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">60</field>
    </record>
    <record id="menu_prayer_cell_list" model="website.menu">
        <field name="name">Cellules de prière</field>
        <field name="url">/cellules-priere</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">70</field>
    </record>
    <record id="menu_inscription_ecole" model="website.menu">
        <field name="name">Inscription École</field>
        <field name="url">/inscription-ecole</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">55</field>
    </record>
    <record id="menu_school_list" model="website.menu">
        <field name="name">Liste des écoles</field>
        <field name="url">/ecoles</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">65</field>
    </record>
    <!-- Template 404 personnalisé -->
    <template id="404_custom" name="Page 404 Personnalisée" inherit_id="http_routing.404">
        <xpath expr="//div[hasclass('container')]" position="replace">
            <div class="container text-center py-5">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <!-- Image ou icône 404 -->
                        <div class="mb-4">
                            <i class="fa fa-exclamation-triangle fa-5x text-warning mb-3"></i>
                            <h1 class="display-1 fw-bold text-primary">404</h1>
                        </div>
                        
                        <!-- Message principal -->
                        <h2 class="mb-4">Oups ! Page non trouvée</h2>
                        <p class="lead mb-4">
                            La page que vous recherchez n'existe pas ou a été déplacée.
                            Ne vous inquiétez pas, nous pouvons vous aider à trouver ce que vous cherchez.
                        </p>
                        
                        <!-- Boutons d'action -->
                        <div class="mb-4">
                            <a href="/" class="btn btn-primary btn-lg me-3">
                                <i class="fa fa-home"></i> Retour à l'accueil
                            </a>
                            <a href="/contactus" class="btn btn-outline-secondary btn-lg">
                                <i class="fa fa-envelope"></i> Nous contacter
                            </a>
                        </div>
                        
                        <!-- Suggestions de pages -->
                        <div class="row mt-5">
                            <div class="col-md-4">
                                <div class="card h-100 shadow-sm">
                                    <div class="card-body">
                                        <i class="fa fa-shopping-cart fa-2x text-primary mb-3"></i>
                                        <h5 class="card-title">Nos Produits</h5>
                                        <p class="card-text">Découvrez notre gamme complète de produits.</p>
                                        <a href="/shop" class="btn btn-outline-primary">Voir les produits</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 shadow-sm">
                                    <div class="card-body">
                                        <i class="fa fa-info-circle fa-2x text-success mb-3"></i>
                                        <h5 class="card-title">À propos</h5>
                                        <p class="card-text">Apprenez-en plus sur notre entreprise.</p>
                                        <a href="/aboutus" class="btn btn-outline-success">En savoir plus</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 shadow-sm">
                                    <div class="card-body">
                                        <i class="fa fa-blog fa-2x text-info mb-3"></i>
                                        <h5 class="card-title">Blog</h5>
                                        <p class="card-text">Lisez nos derniers articles et actualités.</p>
                                        <a href="/blog" class="btn btn-outline-info">Lire le blog</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Barre de recherche -->
                        <div class="mt-5">
                            <h4 class="mb-3">Ou utilisez la recherche :</h4>
                            <form class="d-flex justify-content-center" action="/website/search" method="GET">
                                <div class="input-group" style="max-width: 500px;">
                                    <input type="text" class="form-control form-control-lg" 
                                           name="search" placeholder="Rechercher sur le site..." 
                                           aria-label="Recherche"/>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Template XML pour Odoo - À placer dans views/inscription_terms.xml -->
    <template id="inscription_terms" name="Conditions d'utilisation">
        <t t-call="website.layout">
            <style>
                /* CSS personnalisé pour la timeline */
                .timeline {
                position: relative;
                padding: 0;
                list-style: none;
                }

                .timeline-item {
                position: relative;
                margin-bottom: 2rem;
                padding-left: 3rem;
                }

                .timeline-marker {
                position: absolute;
                left: 0;
                top: 0;
                width: 2rem;
                height: 2rem;
                border-radius: 50%;
                border: 3px solid white;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                }

                .timeline-item:not(:last-child):before {
                content: '';
                position: absolute;
                left: 0.9rem;
                top: 2rem;
                width: 2px;
                height: calc(100% + 1rem);
                background: #dee2e6;
                }

                .timeline-title {
                color: #495057;
                font-weight: 600;
                }

                .timeline-content p {
                color: #6c757d;
                margin-bottom: 0;
                }

                /* Responsive adjustments */
                @media (max-width: 768px) {
                .timeline-item {
                padding-left: 2.5rem;
                }

                .timeline-marker {
                width: 1.5rem;
                height: 1.5rem;
                }

                .timeline-item:not(:last-child):before {
                left: 0.65rem;
                }
                }
            </style>
            <div id="wrap">
                <div class="container mt-4">
                    <div class="row justify-content-center">
                        <div class="col-lg-10 col-xl-8">
                            <div class="card shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h1 class="card-title mb-0 h3">
                                        <i class="fa fa-file-text-o me-2"></i> Conditions
                                        d'utilisation - Inscription </h1>
                                </div>

                                <div class="card-body">
                                    <div class="alert alert-info">
                                        <i class="fa fa-info-circle me-2"></i>
                                            <strong>Information :</strong>
                                        En vous inscrivant, vous acceptez ces conditions
                                        d'utilisation. </div>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-user-plus me-2"></i> 1. Inscription et
                                            Compte Utilisateur </h3>
                                        <p>En vous inscrivant sur notre plateforme, vous acceptez de
                                            :</p>
                                        <ul class="list-unstyled ps-3">
                                            <li><i class="fa fa-check text-success me-2"></i>Fournir
                                                des informations exactes et à jour</li>
                                            <li><i class="fa fa-check text-success me-2"></i>Maintenir
                                                la confidentialité de vos identifiants</li>
                                            <li><i class="fa fa-check text-success me-2"></i>Notifier
                                                immédiatement tout usage non autorisé de votre
                                                compte</li>
                                            <li><i class="fa fa-check text-success me-2"></i>Respecter
                                                les valeurs chrétiennes dans vos interactions</li>
                                        </ul>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-shield me-2"></i> 2. Protection des
                                            Données Personnelles </h3>
                                        <p>Nous nous engageons à protéger vos données personnelles
                                            selon les principes suivants :</p>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="card border-success mb-3">
                                                    <div class="card-body">
                                                        <h5 class="card-title text-success">
                                                            <i class="fa fa-lock me-2"></i>
                                                            Confidentialité
                                                            </h5>
                                                        <p class="card-text">Vos informations
                                                            personnelles sont traitées de manière
                                                            confidentielle et ne sont partagées
                                                            qu'avec les responsables autorisés de
                                                            l'église.</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="card border-info mb-3">
                                                    <div class="card-body">
                                                        <h5 class="card-title text-info">
                                                            <i class="fa fa-edit me-2"></i>Droit de
                                                            rectification </h5>
                                                        <p class="card-text">Vous pouvez demander la
                                                            modification ou la suppression de vos
                                                            données à tout moment en contactant
                                                            l'administration.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-users me-2"></i> 3. Participation aux
                                            Activités </h3>
                                        <p>En vous inscrivant comme moniteur, enseignant ou
                                            responsable, vous vous engagez à :</p>
                                        <div class="alert alert-warning">
                                            <h5 class="alert-heading">
                                                <i class="fa fa-exclamation-triangle me-2"></i>Responsabilités
                                                importantes </h5>
                                            <ul class="mb-0">
                                                <li>Participer régulièrement aux activités de
                                                    l'école du dimanche</li>
                                                <li>Respecter les enseignements bibliques dans votre
                                                    conduite</li>
                                                <li>Contribuer positivement à l'éducation
                                                    spirituelle des enfants</li>
                                                <li>Collaborer harmonieusement avec les autres
                                                    membres de l'équipe</li>
                                            </ul>
                                        </div>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-clock-o me-2"></i> 4. Validation et
                                            Activation du Compte </h3>
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="timeline">
                                                    <div class="timeline-item">
                                                        <div class="timeline-marker bg-primary"></div>
                                                        <div class="timeline-content">
                                                            <h5 class="timeline-title">Étape 1 :
                                                                Inscription</h5>
                                                            <p>Votre inscription est enregistrée
                                                                mais votre compte reste inactif</p>
                                                        </div>
                                                    </div>
                                                    <div class="timeline-item">
                                                        <div class="timeline-marker bg-warning"></div>
                                                        <div class="timeline-content">
                                                            <h5 class="timeline-title">Étape 2 :
                                                                Validation</h5>
                                                            <p>Un administrateur vérifie et valide
                                                                votre demande d'inscription</p>
                                                        </div>
                                                    </div>
                                                    <div class="timeline-item">
                                                        <div class="timeline-marker bg-success"></div>
                                                        <div class="timeline-content">
                                                            <h5 class="timeline-title">Étape 3 :
                                                                Activation</h5>
                                                            <p>Votre compte est activé et vous
                                                                pouvez participer aux activités</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-gavel me-2"></i> 5. Règles de Conduite </h3>
                                        <div class="alert alert-danger">
                                            <h5 class="alert-heading">
                                                <i class="fa fa-ban me-2"></i>Comportements
                                                interdits </h5>
                                            <p>Les comportements suivants peuvent entraîner la
                                                suspension de votre compte :</p>
                                            <ul class="mb-0">
                                                <li>Diffusion de contenus inappropriés ou contraires
                                                    aux valeurs chrétiennes</li>
                                                <li>Harcèlement ou discrimination envers d'autres
                                                    membres</li>
                                                <li>Utilisation abusive des informations
                                                    personnelles d'autres membres</li>
                                                <li>Non-respect des responsables et de l'autorité
                                                    ecclésiastique</li>
                                            </ul>
                                        </div>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-phone me-2"></i> 6. Contact et Support </h3>
                                        <p>Pour toute question concernant ces conditions
                                            d'utilisation ou votre inscription, vous pouvez
                                            contacter :</p>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="card border-primary">
                                                    <div class="card-body text-center">
                                                        <i
                                                            class="fa fa-user-circle fa-3x text-primary mb-3"></i>
                                                        <h5>Administration</h5>
                                                        <p class="text-muted">Pour les questions
                                                            d'inscription et de validation de compte</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="card border-success">
                                                    <div class="card-body text-center">
                                                        <i
                                                            class="fa fa-graduation-cap fa-3x text-success mb-3"></i>
                                                        <h5>Responsables Pédagogiques</h5>
                                                        <p class="text-muted">Pour les questions
                                                            liées aux activités d'enseignement</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <section class="mb-4">
                                        <h3 class="h4 text-primary mb-3">
                                            <i class="fa fa-edit me-2"></i> 7. Modifications des
                                            Conditions </h3>
                                        <p>Ces conditions peuvent être modifiées à tout moment. Les
                                            utilisateurs seront notifiés des changements importants
                                            par email ou via la plateforme.</p>
                                    </section>

                                    <div class="alert alert-success text-center">
                                        <h4 class="alert-heading">
                                            <i class="fa fa-heart me-2"></i> Merci pour votre
                                            engagement ! </h4>
                                        <p class="mb-0">
                                            Votre participation contribue à l'édification
                                            spirituelle de notre communauté.
                                            Que Dieu vous bénisse dans ce ministère !
                                        </p>
                                    </div>

                                    <div class="text-center mt-4">
                                        <a href="/inscription-ecole" class="btn btn-primary btn-lg">
                                            <i class="fa fa-arrow-left me-2"></i> Retour à
                                            l'inscription </a>
                                    </div>
                                </div>

                                <div class="card-footer text-muted text-center">
                                    <small>
                                        <i class="fa fa-calendar me-1"></i> Dernière mise à jour : <t
                                            t-esc="datetime.datetime.now().strftime('%d/%m/%Y')" />
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Template pour la vue web des écoles -->
    <template id="school_list" name="Liste des écoles">
        <t t-call="website.layout">
            <style>
                .classes-list {
                max-height: 200px;
                overflow-y: auto;
                padding: 5px;
                }
                .class-card {
                background-color: #f8f9fa !important;
                border: 1px solid #dee2e6 !important;
                transition: all 0.2s ease-in-out;
                }
                .class-card:hover {
                background-color: #e9ecef !important;
                border-color: #adb5bd !important;
                }
                .class-card:last-child {
                margin-bottom: 0 !important;
                }
                @media (max-width: 768px) {
                .classes-list {
                max-height: 150px;
                }
                .class-card {
                padding: 8px !important;
                }
                }
            </style>
            <div class="container mt-4 mb-5">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card shadow-lg">
                            <div class="card-header bg-gradient-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h3 class="mb-0"><i class="fas fa-graduation-cap me-1"></i>
                                            Liste des Écoles</h3>
                                        <small class="text-light">
                                            <i class="fa fa-calendar me-1"></i> Dernière mise à jour
                                            : <span
                                                t-esc="datetime.datetime.now().strftime('%d/%m/%Y à %H:%M')" />
                                        </small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <span class="badge bg-light text-primary fs-6">
                                            <i class="fas fa-school me-1"></i>
                                            <span
                                                t-esc="pager['total']" /> école(s) </span>
                                        <br />
                                        <span class="badge bg-light text-primary fs-6 mt-1">
                                            <i class="fas fa-chalkboard-teacher me-1"></i>
                                            <span
                                                t-esc="total_monitors" /> moniteur(s) </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="searchInput"
                                                placeholder="Rechercher une école, église ou responsable..." />
                                        </div>
                                    </div>
                                    <div
                                        class="col-md-6 text-end d-flex justify-content-end align-items-center">
                                        <select id="itemsPerPage" class="form-select me-2"
                                            style="width: auto;">
                                            <option value="10"
                                                t-att-selected="'selected' if pager['limit'] == 10 else None">
                                                10</option>
                                            <option value="20"
                                                t-att-selected="'selected' if pager['limit'] == 20 else None">
                                                20</option>
                                            <option value="50"
                                                t-att-selected="'selected' if pager['limit'] == 50 else None">
                                                50</option>
                                            <option value="100"
                                                t-att-selected="'selected' if pager['limit'] == 100 else None">
                                                100</option>
                                        </select>
                                        <a href="/ecoles/pdf" class="btn btn-outline-primary me-2">
                                            <i class="fa fa-file-pdf me-1"></i> PDF </a>
                                        <button class="btn btn-outline-secondary"
                                            onclick="window.print()">
                                            <i class="fa fa-print me-1"></i> Imprimer </button>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <small class="text-muted"> Affichage de <span
                                                t-esc="pager['offset'] + 1" /> à <span
                                                t-esc="min(pager['offset'] + pager['limit'], pager['total'])" />
                                            sur <span t-esc="pager['total']" /> écoles </small>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <small class="text-muted"> Page <span t-esc="pager['page']" />
                                            sur <span t-esc="pager['page_count']" />
                                        </small>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover table-striped" id="schoolsTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th class="text-center">École</th>
                                                <th class="text-center">Église</th>
                                                <th class="text-center">Responsable EDD &amp; Moniteurs</th>
                                                <th class="text-center">Effectifs</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="schools" t-as="school">
                                                <tr>
                                                    <td class="fw-bold">
                                                        <i
                                                            class="fas fa-graduation-cap text-primary me-1"></i>
                                                        <span t-esc="school.name" />
                                                    </td>
                                                    <td>
                                                        <span
                                                            t-esc="school.school_church_id.name or 'Non définie'" />
                                                    </td>
                                                    <!-- Dans le template school_list, modifiez la
                                                    partie responsable pour ajouter l'âge -->
                                                    <td>
                                                        <t t-if="school.school_leader_id">
                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center">
                                                                    <i
                                                                        class="fa fa-user-tie me-2 text-primary"></i>
                                                                    <div>
                                                                        <div class="fw-bold">
                                                                            <span
                                                                                t-esc="school.school_leader_id.name" />
                                                                            <span
                                                                                class="badge bg-success ms-2">
                                                                                Responsable EDD</span>
                                                                        </div>
                                                                        <div
                                                                            class="text-muted small">
                                                                            <span
                                                                                t-esc="school.school_leader_id.age" />
                                                                            ans </div>
                                                                        <t
                                                                            t-if="school.school_leader_id.phone">
                                                                            <div
                                                                                class="text-muted small">
                                                                                <i
                                                                                    class="fa fa-phone me-1"></i>
                                                                                <span
                                                                                    t-esc="school.school_leader_id.phone" />
                                                                            </div>
                                                                        </t>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="text-muted fst-italic">Responsables
                                                                non assignés</div>
                                                        </t>
                                                        <!-- Moniteurs -->
                                                        <t
                                                            t-if="school.school_leader_id or school.school_monitor_ids">
                                                            <div class="assistant-leaders">
                                                                <small
                                                                    class="text-muted d-block mb-1">Moniteurs:</small>
                                                                <t
                                                                    t-foreach="school.school_monitor_ids"
                                                                    t-as="assistant">
                                                                    <div
                                                                        class="assistant-leader bg-light p-2 mb-2 rounded">
                                                                        <div
                                                                            class="d-flex align-items-center">
                                                                            <i
                                                                                class="fa fa-user me-2 text-secondary"></i>
                                                                            <div>
                                                                                <div
                                                                                    class="fw-semibold">
                                                                                    <span
                                                                                        t-esc="assistant.name" />
                                                                                    <span
                                                                                        class="badge bg-warning text-dark ms-2">
                                                                                        Moniteur</span>
                                                                                </div>
                                                                                <div
                                                                                    class="text-muted small">
                                                                                    <span
                                                                                        t-esc="assistant.age" />
                                                                                    ans </div>
                                                                                <t
                                                                                    t-if="assistant.phone">
                                                                                    <div
                                                                                        class="text-muted small">
                                                                                        <i
                                                                                            class="fa fa-phone me-1"></i>
                                                                                        <span
                                                                                            t-esc="assistant.phone" />
                                                                                    </div>
                                                                                </t>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                    </td>
                                                    <td class="text-center">
                                                        <span class="badge bg-info">
                                                            <t t-if="school.school_leader_id"></t>
                                                                <span
                                                                    t-esc="len(school.school_monitor_ids) +1" />
                                                            <t t-else="">
                                                                <span
                                                                    t-esc="len(school.school_monitor_ids)" />
                                                            </t>
                                                        </span>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <nav aria-label="Navigation des pages">
                                            <ul class="pagination justify-content-center">
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == 1 else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_first']">
                                                        <i class="fa fa-angle-double-left"></i>
                                                    </a>
                                                </li>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_previous'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_previous'] or '#'">
                                                        <i class="fa fa-angle-left"></i>
                                                    </a>
                                                </li>
                                                <t t-foreach="pager['page_range']" t-as="page_num">
                                                    <li
                                                        t-att-class="'page-item' + (' active' if page_num == pager['page'] else '')">
                                                        <a class="page-link"
                                                            t-att-href="pager['url_page'] % page_num">
                                                            <span t-esc="page_num" />
                                                        </a>
                                                    </li>
                                                </t>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_next'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_next'] or '#'">
                                                        <i class="fa fa-angle-right"></i>
                                                    </a>
                                                </li>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == pager['page_count'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_last']">
                                                        <i class="fa fa-angle-double-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                    // Gestion de la recherche
                    const searchInput = document.getElementById('searchInput');
                    const rows = document.querySelectorAll('#schoolsTable tbody tr');
                    searchInput.addEventListener('input', function() {
                    const term = this.value.toLowerCase();
                    rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(term) ? '' : 'none';
                    });
                    });

                    // Gestion du nombre d'éléments par page
                    document.getElementById('itemsPerPage').addEventListener('change', function() {
                    const limit = this.value;
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('limit', limit);
                    currentUrl.searchParams.set('page', 1); // reset to first page
                    window.location.href = currentUrl.toString();
                    });
                    });
                </script>
            </div>
        </t>
    </template>

    <template id="inscription_ecole_form" name="Formulaire d'inscription pour école du dimanche">
        <t t-call="website.layout">
            <t t-set="head">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <meta name="description"
                    content="Formulaire d'inscription pour moniteurs et responsables d'école du dimanche" />
            </t>

            <style>
                :root {
                --primary-color: #2563eb;
                --secondary-color: #64748b;
                --success-color: #059669;
                --danger-color: #dc2626;
                --warning-color: #d97706;
                --light-bg: #f8fafc;
                --border-color: #e2e8f0;
                --border-radius: 8px;
                --transition: all 0.3s ease;
                }

                .registration-form {
                min-height: 100vh;
                background: linear-gradient(135deg, var(--light-bg) 0%, #e2e8f0 100%);
                padding: 2rem 0;
                }

                .form-container {
                max-width: 800px;
                margin: 0 auto;
                background: white;
                border-radius: 16px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                }

                .form-header {
                background: linear-gradient(135deg, var(--primary-color) 0%, #3b82f6 100%);
                padding: 2rem;
                text-align: center;
                color: white;
                }

                .form-header h1 {
                font-size: 1.75rem;
                font-weight: 700;
                margin: 0;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }

                .form-header .subtitle {
                margin-top: 0.5rem;
                opacity: 0.9;
                font-size: 1rem;
                }

                .form-body {
                padding: 2rem;
                }

                .section-title {
                display: flex;
                align-items: center;
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--primary-color);
                margin: 2rem 0 1.5rem 0;
                padding-bottom: 0.75rem;
                border-bottom: 2px solid var(--border-color);
                }

                .section-title:first-child {
                margin-top: 0;
                }

                .section-title i {
                margin-right: 0.75rem;
                font-size: 1.1rem;
                }

                .form-group {
                margin-bottom: 1.5rem;
                }

                .form-label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 500;
                color: #374151;
                font-size: 0.95rem;
                }

                .required-field .form-label::after {
                content: " *";
                color: var(--danger-color);
                font-weight: 600;
                }

                .form-control, .form-select {
                width: 100%;
                padding: 0.75rem;
                border: 2px solid var(--border-color);
                border-radius: var(--border-radius);
                font-size: 1rem;
                transition: var(--transition);
                background-color: #fff;
                }

                .form-control:focus, .form-select:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
                }

                .form-control.is-invalid, .form-select.is-invalid {
                border-color: var(--danger-color);
                box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
                }

                .invalid-feedback {
                display: block;
                color: var(--danger-color);
                font-size: 0.875rem;
                margin-top: 0.25rem;
                }

                .date-selectors {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 0.75rem;
                }

                .date-info {
                background: #f1f5f9;
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius);
                padding: 0.75rem;
                margin-top: 0.5rem;
                font-size: 0.875rem;
                color: var(--secondary-color);
                }

                .checkbox-wrapper {
                display: flex;
                align-items: flex-start;
                margin: 1.5rem 0;
                padding: 1rem;
                background: var(--light-bg);
                border-radius: var(--border-radius);
                border: 1px solid var(--border-color);
                }

                .form-check-input {
                margin-right: 0.75rem;
                margin-top: 0.125rem;
                width: 1.125rem;
                height: 1.125rem;
                accent-color: var(--primary-color);
                }

                .form-check-label {
                flex: 1;
                font-size: 0.95rem;
                line-height: 1.5;
                }

                .form-check-label a {
                color: var(--primary-color);
                text-decoration: underline;
                font-weight: 500;
                }

                .submit-btn {
                width: 100%;
                background: linear-gradient(135deg, var(--primary-color) 0%, #3b82f6 100%);
                border: none;
                color: white;
                padding: 1rem 2rem;
                font-size: 1.1rem;
                font-weight: 600;
                border-radius: var(--border-radius);
                transition: var(--transition);
                cursor: pointer;
                margin-top: 1rem;
                }

                .submit-btn:hover:not(:disabled) {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
                }

                .submit-btn:disabled {
                opacity: 0.7;
                cursor: not-allowed;
                }

                .alert {
                border-radius: var(--border-radius);
                padding: 1rem;
                margin-bottom: 1.5rem;
                border-left: 4px solid;
                }

                .alert-danger {
                background-color: #fef2f2;
                border-left-color: var(--danger-color);
                color: #991b1b;
                }

                .loading-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                }

                .loading-spinner {
                background: white;
                padding: 2rem;
                border-radius: var(--border-radius);
                text-align: center;
                min-width: 200px;
                }

                @media (max-width: 768px) {
                .registration-form {
                padding: 1rem;
                }

                .form-body {
                padding: 1.5rem;
                }

                .date-selectors {
                grid-template-columns: 1fr;
                gap: 0.5rem;
                }

                .form-header h1 {
                font-size: 1.5rem;
                }

                .section-title {
                font-size: 1.1rem;
                }
                }

                @media (max-width: 480px) {
                .form-body {
                padding: 1rem;
                }
                }

                /* Animation pour les champs invalides */
                @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
                }

                .shake {
                animation: shake 0.5s ease-in-out;
                }
            </style>

            <div class="registration-form">
                <div class="container">
                    <div class="form-container">
                        <div class="form-header">
                            <h1>RECENSEMENT DES MONITEURS ET MONITRICES DE CÔTE D'IVOIRE</h1>
                            <div class="subtitle">Formulaire pour moniteurs et responsables</div>
                        </div>

                        <div class="form-body">
                            <t t-if="error">
                                <div class="alert alert-danger" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    <t t-out="error" />
                                </div>
                            </t>

                            <form method="post" id="registrationForm" novalidate="novalidate">
                                <input type="hidden" name="csrf_token"
                                    t-att-value="request.csrf_token()" />

                                <!-- Section Informations personnelles -->
                                <div class="section-title">
                                    <i class="fas fa-user"></i> Informations personnelles </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required-field">
                                            <label class="form-label">Nom complet</label>
                                            <input type="text"
                                                name="name"
                                                class="form-control"
                                                required="required"
                                                maxlength="100"
                                                placeholder="Entrez votre nom complet"
                                                t-att-value="values and values.get('name', '') or ''" />
                                            <div class="invalid-feedback">Ce champ est obligatoire</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group required-field">
                                            <label class="form-label">Sexe</label>
                                            <select name="gender" class="form-select"
                                                required="required">
                                                <option value="">-- Sélectionnez votre sexe --</option>
                                                <option value="male"
                                                    t-att-selected="'selected' if (values and values.get('gender') == 'male') else None">
                                                    Homme
                                                </option>
                                                <option value="female"
                                                    t-att-selected="'selected' if (values and values.get('gender') == 'female') else None">
                                                    Femme
                                                </option>
                                            </select>
                                            <div class="invalid-feedback">Veuillez sélectionner
                                                votre sexe</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required-field">
                                            <label class="form-label">Date de naissance</label>
                                            <div class="date-selectors">
                                                <select name="birth_day" class="form-select"
                                                    required="required">
                                                    <option value="">Jour</option>
                                                    <t t-foreach="range(1, 32)" t-as="day">
                                                        <option t-att-value="day"
                                                            t-att-selected="'selected' if (values and str(day) == values.get('birth_day')) else None">
                                                            <t t-out="day" />
                                                        </option>
                                                    </t>
                                                </select>
                                                <select name="birth_month" class="form-select"
                                                    required="required">
                                                    <option value="">Mois</option>
                                                    <t t-set="months"
                                                        t-value="['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']" />
                                                    <t t-foreach="enumerate(months, 1)" t-as="month">
                                                        <option t-att-value="month[0]"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == str(month[0])) else None">
                                                            <t t-out="month[1]" />
                                                        </option>
                                                    </t>
                                                </select>
                                                <select name="birth_year" class="form-select"
                                                    required="required">
                                                    <option value="">Année</option>
                                                    <t
                                                        t-foreach="range(datetime.datetime.now().year, datetime.datetime.now().year - 100, -1)"
                                                        t-as="year">
                                                        <option t-att-value="year"
                                                            t-att-selected="'selected' if (values and str(year) == values.get('birth_year')) else None">
                                                            <t t-out="year" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            <div class="invalid-feedback">Veuillez sélectionner
                                                votre date de naissance complète</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Date de salut</label>
                                            <div class="date-selectors">
                                                <select name="salvation_day" class="form-select">
                                                    <option value="">Jour</option>
                                                    <t t-foreach="range(1, 32)" t-as="day">
                                                        <option t-att-value="day"
                                                            t-att-selected="'selected' if (values and str(day) == values.get('salvation_day')) else None">
                                                            <t t-out="day" />
                                                        </option>
                                                    </t>
                                                </select>
                                                <select name="salvation_month" class="form-select">
                                                    <option value="">Mois</option>
                                                    <t t-foreach="enumerate(months, 1)" t-as="month">
                                                        <option t-att-value="month[0]"
                                                            t-att-selected="'selected' if (values and values.get('salvation_month') == str(month[0])) else None">
                                                            <t t-out="month[1]" />
                                                        </option>
                                                    </t>
                                                </select>
                                                <select name="salvation_year" class="form-select">
                                                    <option value="">Année</option>
                                                    <t
                                                        t-foreach="range(datetime.datetime.now().year, datetime.datetime.now().year - 50, -1)"
                                                        t-as="year">
                                                        <option t-att-value="year"
                                                            t-att-selected="'selected' if (values and str(year) == values.get('salvation_year')) else None">
                                                            <t t-out="year" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            <div class="date-info">
                                                <i class="fas fa-info-circle me-1"></i> Champ
                                                optionnel - Date de votre conversion religieuse </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Téléphone</label>
                                            <input type="tel"
                                                name="phone"
                                                class="form-control"
                                                placeholder="+225 XX XX XX XX XX"
                                                pattern="[+]?[0-9\s\-\(\)]+"
                                                t-att-value="values and values.get('phone', '') or ''" />
                                            <div class="invalid-feedback">Veuillez entrer un numéro
                                                de téléphone valide</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">WhatsApp</label>
                                            <input type="tel"
                                                name="mobile"
                                                class="form-control"
                                                placeholder="+225 XX XX XX XX XX"
                                                pattern="[+]?[0-9\s\-\(\)]+"
                                                t-att-value="values and values.get('mobile', '') or ''" />
                                            <div class="invalid-feedback">Veuillez entrer un numéro
                                                WhatsApp valide</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Section Affiliation -->
                                <div class="section-title">
                                    <i class="fas fa-church"></i> Affiliation à l'école </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required-field">
                                            <label class="form-label">École du dimanche</label>
                                            <select name="school_id" class="form-select"
                                                required="required">
                                                <option value="">-- Sélectionnez votre école --</option>
                                                <t t-if="schools" t-foreach="schools" t-as="school">
                                                    <option t-att-value="school.id"
                                                        t-att-selected="'selected' if (values and str(school.id) == values.get('school_id')) else None">
                                                        <t t-out="school.name" />
                                                    </option>
                                                </t>
                                            </select>
                                            <div class="invalid-feedback">Veuillez sélectionner une
                                                école</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group required-field">
                                            <label class="form-label">Fonction exercée</label>
                                            <select name="function_type" class="form-select"
                                                required="required">
                                                <option value="">-- Sélectionnez votre fonction --</option>
                                                <option value="monitor"
                                                    t-att-selected="'selected' if (values and values.get('function_type') == 'monitor') else None">
                                                    Moniteur/Monitrice
                                                </option>
                                                <option value="leader"
                                                    t-att-selected="'selected' if (values and values.get('function_type') == 'leader') else None">
                                                    Responsable EDD
                                                </option>
                                            </select>
                                            <div class="invalid-feedback">Veuillez sélectionner une
                                                fonction</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Conditions d'utilisation -->
                                <div class="checkbox-wrapper required-field">
                                    <input class="form-check-input"
                                        type="checkbox"
                                        name="accept_terms"
                                        id="accept_terms"
                                        required="required"
                                        t-att-checked="'checked' if (values and values.get('accept_terms')) else None" />
                                    <label class="form-check-label" for="accept_terms"> J'accepte
                                        les <a href="/inscription-ecole/terms" target="_blank" rel="noopener">conditions
                                        d'utilisation</a> et je confirme que les informations
                                        fournies sont exactes. </label>
                                    <div class="invalid-feedback">Vous devez accepter les conditions
                                        d'utilisation</div>
                                </div>

                                <!-- Bouton de soumission -->
                                <button type="submit" class="submit-btn" id="submitBtn">
                                    <i class="fas fa-paper-plane me-2"></i> Soumettre </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Overlay de chargement -->
            <div class="loading-overlay" id="loadingOverlay">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin fa-2x mb-3"></i>
                    <div>Envoi de votre inscription en cours...</div>
                    <small class="text-muted">Veuillez patienter</small>
                </div>
            </div>

            <script> document.addEventListener('DOMContentLoaded', function() { const form =
                document.getElementById('registrationForm'); const submitBtn =
                document.getElementById('submitBtn'); const loadingOverlay =
                document.getElementById('loadingOverlay'); // Validation en temps réel const inputs
                = form.querySelectorAll('input, select'); inputs.forEach(input => {
                input.addEventListener('input', function() { validateField(this); });
                input.addEventListener('blur', function() { validateField(this); }); }); // Fonction
                de validation d'un champ function validateField(field) { const value =
                field.value.trim(); let isValid = true; // Supprimer les classes d'erreur existantes
                field.classList.remove('is-invalid', 'shake'); // Validation des champs requis if
                (field.hasAttribute('required')) { if (field.type === 'checkbox') { isValid =
                field.checked; } else { isValid = value !== ''; } } // Validation spécifique des
                téléphones if (field.type === 'tel' &amp;&amp; value) { const phoneRegex =
                /^[+]?[\d\s\-\(\)]{8,}$/; isValid = phoneRegex.test(value); } // Validation de
                l'email si présent if (field.type === 'email' &amp;&amp; value) { const emailRegex =
                /^[^\s@]+@[^\s@]+\.[^\s@]+$/; isValid = emailRegex.test(value); } // Validation des
                dates de naissance if (['birth_day', 'birth_month',
                'birth_year'].includes(field.name)) { validateBirthDate(); } if (!isValid) {
                field.classList.add('is-invalid'); } return isValid; } // Validation de la date de
                naissance function validateBirthDate() { const day =
                form.querySelector('[name="birth_day"]'); const month =
                form.querySelector('[name="birth_month"]'); const year =
                form.querySelector('[name="birth_year"]'); const hasAllValues = day.value &amp;&amp;
                month.value &amp;&amp; year.value; const fields = [day, month, year]; if
                (!hasAllValues &amp;&amp; (day.value || month.value || year.value)) { // Certains
                champs sont remplis mais pas tous fields.forEach(field => { if (!field.value) {
                field.classList.add('is-invalid'); } else { field.classList.remove('is-invalid'); }
                }); return false; } else if (hasAllValues) { // Validation de la date const
                birthDate = new Date(year.value, month.value - 1, day.value); const today = new
                Date(); const age = today.getFullYear() - birthDate.getFullYear(); if (age &lt; 16
                || age > 100) { fields.forEach(field => field.classList.add('is-invalid')); return
                false; } else { fields.forEach(field => field.classList.remove('is-invalid'));
                return true; } } else { fields.forEach(field =>
                field.classList.remove('is-invalid')); return false; // Champs requis mais vides } }
                // Validation du formulaire complet function validateForm() { let isFormValid =
                true; const requiredFields = form.querySelectorAll('[required]');
                requiredFields.forEach(field => { if (!validateField(field)) { isFormValid = false;
                field.classList.add('shake'); setTimeout(() => field.classList.remove('shake'),
                500); } }); // Validation spéciale pour la date de naissance if
                (!validateBirthDate()) { isFormValid = false; const dateFields = [
                form.querySelector('[name="birth_day"]'),
                form.querySelector('[name="birth_month"]'),
                form.querySelector('[name="birth_year"]') ]; dateFields.forEach(field => {
                field.classList.add('shake'); setTimeout(() => field.classList.remove('shake'),
                500); }); } return isFormValid; } // Gestion de la soumission
                form.addEventListener('submit', function(e) { e.preventDefault(); if
                (!validateForm()) { // Faire défiler vers le premier champ invalide const
                firstInvalid = form.querySelector('.is-invalid'); if (firstInvalid) {
                firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                firstInvalid.focus(); } // Afficher un message d'erreur showNotification('Veuillez
                corriger les erreurs dans le formulaire', 'error'); return; } // Afficher le loading
                loadingOverlay.style.display = 'flex'; submitBtn.disabled = true; // Soumettre le
                formulaire setTimeout(() => { form.submit(); }, 500); }); // Fonction pour afficher
                des notifications function showNotification(message, type = 'info') { // Créer une
                notification toast simple const notification = document.createElement('div');
                notification.className = `alert alert-${type === 'error' ? 'danger' : 'success'}
                position-fixed`; notification.style.cssText = ` top: 20px; right: 20px; z-index:
                10000; min-width: 300px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); `;
                notification.innerHTML = ` <i
                    class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'} me-2"></i>
                ${message} `; document.body.appendChild(notification); // Supprimer après 5 secondes
                setTimeout(() => { notification.remove(); }, 5000); } // Auto-resize des textarea si
                présents const textareas = form.querySelectorAll('textarea');
                textareas.forEach(textarea => { textarea.addEventListener('input', function() {
                this.style.height = 'auto'; this.style.height = this.scrollHeight + 'px'; }); });
                }); </script>
        </t>
    </template>

    <!-- Template pour la vue web des cellules de prière -->
    <template id="prayer_cell_list" name="Liste des cellules de prière">
        <t t-call="website.layout">
            <style>
                .members-list {
                max-height: 200px;
                overflow-y: auto;
                padding: 5px;
                }
                .member-card {
                background-color: #f8f9fa !important;
                border: 1px solid #dee2e6 !important;
                transition: all 0.2s ease-in-out;
                }
                .member-card:hover {
                background-color: #e9ecef !important;
                border-color: #adb5bd !important;
                }
                .member-card:last-child {
                margin-bottom: 0 !important;
                }
                @media (max-width: 768px) {
                .members-list {
                max-height: 150px;
                }
                .member-card {
                padding: 8px !important;
                }
                }
            </style>
            <div class="container mt-4 mb-5">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card shadow-lg">
                            <div class="card-header bg-gradient-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h3 class="mb-0"><i class="fa fa-heart me-1"></i> Liste des
                                            Cellules de Prière</h3>
                                        <small class="text-light">
                                            <i class="fa fa-calendar me-1"></i> Dernière mise à jour
                                            : <span
                                                t-esc="datetime.datetime.now().strftime('%d/%m/%Y à %H:%M')" />
                                        </small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <span class="badge bg-light text-primary fs-6">
                                            <i class="fa fa-users me-1"></i>
                                            <span
                                                t-esc="pager['total']" /> cellule(s) </span>
                                        <br />
                                        <span class="badge bg-light text-primary fs-6 mt-1">
                                            <i class="fa fa-user me-1"></i>
                                            <span
                                                t-esc="total_members" /> membre(s) total </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="searchInput"
                                                placeholder="Rechercher une cellule, église, tribu ou membre..." />
                                        </div>
                                    </div>
                                    <div
                                        class="col-md-6 text-end d-flex justify-content-end align-items-center">
                                        <select id="itemsPerPage" class="form-select me-2"
                                            style="width: auto;">
                                            <option value="10"
                                                t-att-selected="'selected' if pager['limit'] == 10 else None">
                                                10</option>
                                            <option value="20"
                                                t-att-selected="'selected' if pager['limit'] == 20 else None">
                                                20</option>
                                            <option value="50"
                                                t-att-selected="'selected' if pager['limit'] == 50 else None">
                                                50</option>
                                            <option value="100"
                                                t-att-selected="'selected' if pager['limit'] == 100 else None">
                                                100</option>
                                        </select>
                                        <a href="/cellules-priere/pdf"
                                            class="btn btn-outline-primary me-2">
                                            <i class="fa fa-file-pdf me-1"></i> PDF </a>
                                        <button class="btn btn-outline-secondary"
                                            onclick="window.print()">
                                            <i class="fa fa-print me-1"></i> Imprimer </button>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <small class="text-muted"> Affichage de <span
                                                t-esc="pager['offset'] + 1" /> à <span
                                                t-esc="min(pager['offset'] + pager['limit'], pager['total'])" />
                                            sur <span t-esc="pager['total']" /> cellules </small>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <small class="text-muted"> Page <span t-esc="pager['page']" />
                                            sur <span t-esc="pager['page_count']" />
                                        </small>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover table-striped" id="cellsTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th class="text-center">Cellule</th>
                                                <th class="text-center">Église</th>
                                                <th class="text-center">Tribu</th>
                                                <th class="text-center">Responsables</th>
                                                <th class="text-center">Nombre de membres</th>
                                                <th class="text-center">Membres</th>
                                                <th class="text-center">Responsable de suivi</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="prayer_cells" t-as="cell">
                                                <tr>
                                                    <td class="fw-bold">
                                                        <i class="fa fa-heart text-danger me-1"></i>
                                                        <span t-esc="cell.name" />
                                                    </td>
                                                    <td>
                                                        <span
                                                            t-esc="cell.prayer_cell_church_id.name or 'Non définie'" />
                                                    </td>
                                                    <td>
                                                        <span
                                                            t-esc="cell.prayer_cell_tribe_id.name or 'Non définie'" />
                                                    </td>
                                                    <td>
                                                        <!-- Responsable principal -->
                                                        <t t-if="cell.prayer_cell_leader_id">
                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center">
                                                                    <i
                                                                        class="fa fa-user-tie me-2 text-primary"></i>
                                                                    <div>
                                                                        <div class="fw-bold">
                                                                            <span
                                                                                t-esc="cell.prayer_cell_leader_id.name" />
                                                                            <span
                                                                                class="badge bg-success ms-2">
                                                                                Principal</span>
                                                                        </div>
                                                                        <t
                                                                            t-if="cell.prayer_cell_leader_id.phone">
                                                                            <div
                                                                                class="text-muted small">
                                                                                <i
                                                                                    class="fa fa-phone me-1"></i>
                                                                                <span
                                                                                    t-esc="cell.prayer_cell_leader_id.phone" />
                                                                            </div>
                                                                        </t>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="text-muted fst-italic mb-2">Responsable
                                                                non assigné</div>
                                                        </t>

                                                        <!-- Responsables adjoints -->
                                                        <t
                                                            t-if="cell.prayer_cell_assistant_leader_ids">
                                                            <div class="assistant-leaders">
                                                                <small
                                                                    class="text-muted d-block mb-1">Responsables
                                                                    adjoints:</small>
                                                                <t
                                                                    t-foreach="cell.prayer_cell_assistant_leader_ids"
                                                                    t-as="assistant">
                                                                    <div
                                                                        class="assistant-leader bg-light p-2 mb-2 rounded">
                                                                        <div
                                                                            class="d-flex align-items-center">
                                                                            <i
                                                                                class="fa fa-user me-2 text-secondary"></i>
                                                                            <div>
                                                                                <div
                                                                                    class="fw-semibold">
                                                                                    <span
                                                                                        t-esc="assistant.name" />
                                                                                    <span
                                                                                        class="badge bg-warning text-dark ms-2">
                                                                                        Adjoint</span>
                                                                                </div>
                                                                                <t
                                                                                    t-if="assistant.phone">
                                                                                    <div
                                                                                        class="text-muted small">
                                                                                        <i
                                                                                            class="fa fa-phone me-1"></i>
                                                                                        <span
                                                                                            t-esc="assistant.phone" />
                                                                                    </div>
                                                                                </t>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                    </td>
                                                    <td class="text-center">
                                                        <span class="badge bg-primary">
                                                            <span
                                                                t-esc="len(cell.prayer_cell_members)" />
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <t t-if="cell.prayer_cell_members">
                                                            <div class="members-list">
                                                                <t
                                                                    t-foreach="cell.prayer_cell_members"
                                                                    t-as="member">
                                                                    <div
                                                                        class="member-card bg-light border rounded p-2 mb-2">
                                                                        <div
                                                                            class="d-flex align-items-center">
                                                                            <i
                                                                                class="fa fa-user text-primary me-2"></i>
                                                                            <div class="flex-grow-1">
                                                                                <div class="fw-bold">
                                                                                    <span
                                                                                        t-esc="member.name" />
                                                                                </div>
                                                                                <t
                                                                                    t-if="member.phone">
                                                                                    <div
                                                                                        class="text-muted small">
                                                                                        <i
                                                                                            class="fa fa-phone me-1"></i>
                                                                                        <span
                                                                                            t-esc="member.phone" />
                                                                                    </div>
                                                                                </t>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">Aucun
                                                                membre</span>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <!-- Responsable de suivi -->
                                                        <t t-if="cell.prayer_cell_follower_id">
                                                            <div class="mb-2">
                                                                <div
                                                                    class="d-flex align-items-center">
                                                                    <i
                                                                        class="fa fa-user-tie me-2 text-primary"></i>
                                                                    <div>
                                                                        <div class="fw-bold">
                                                                            <span
                                                                                t-esc="cell.prayer_cell_follower_id.name" />
                                                                        </div>
                                                                        <t
                                                                            t-if="cell.prayer_cell_follower_id.phone">
                                                                            <div
                                                                                class="text-muted small">
                                                                                <i
                                                                                    class="fa fa-phone me-1"></i>
                                                                                <span
                                                                                    t-esc="cell.prayer_cell_follower_id.phone" />
                                                                            </div>
                                                                        </t>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="text-muted fst-italic mb-2">Responsable
                                                                de suivi
                                                                non assigné</div>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <nav aria-label="Navigation des pages">
                                            <ul class="pagination justify-content-center">
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == 1 else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_first']">
                                                        <i class="fa fa-angle-double-left"></i>
                                                    </a>
                                                </li>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_previous'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_previous'] or '#'">
                                                        <i class="fa fa-angle-left"></i>
                                                    </a>
                                                </li>
                                                <t t-foreach="pager['page_range']" t-as="page_num">
                                                    <li
                                                        t-att-class="'page-item' + (' active' if page_num == pager['page'] else '')">
                                                        <a class="page-link"
                                                            t-att-href="pager['url_page'] % page_num">
                                                            <span t-esc="page_num" />
                                                        </a>
                                                    </li>
                                                </t>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_next'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_next'] or '#'">
                                                        <i class="fa fa-angle-right"></i>
                                                    </a>
                                                </li>
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == pager['page_count'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_last']">
                                                        <i class="fa fa-angle-double-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                    const searchInput = document.getElementById('searchInput');
                    const rows = document.querySelectorAll('#cellsTable tbody tr');
                    searchInput.addEventListener('input', function () {
                    const term = this.value.toLowerCase();
                    rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(term) ? '' : 'none';
                    });
                    });

                    document.getElementById('itemsPerPage').addEventListener('change', function () {
                    const limit = this.value;
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('limit', limit);
                    currentUrl.searchParams.set('page', 1); // reset to first page
                    window.location.href = currentUrl.toString();
                    });
                    });
                </script>
            </div>
        </t>
    </template>

    <!-- Template pour la vue web -->
    <template id="church_list" name="Liste des églises">
        <t t-call="website.layout">
            <div class="container mt-4 mb-5">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card shadow-lg">
                            <div class="card-header bg-gradient-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h3 class="mb-0">
                                            <i class="fa fa-church me-1"></i> Liste des Églises </h3>
                                        <small class="text-light">
                                            <i class="fa fa-calendar me-1"></i> Dernière mise à jour
                                            : <span
                                                t-esc="datetime.datetime.now().strftime('%d/%m/%Y à %H:%M')" />
                                        </small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <span class="badge bg-light text-primary fs-6">
                                            <i class="fa fa-home me-1"></i>
                                        <span
                                                t-esc="pager['total']" /> église(s) </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="searchInput"
                                                placeholder="Rechercher une église, région ou pasteur..." />
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <div class="btn-group">
                                            <select class="form-select" id="itemsPerPage"
                                                style="width: auto;">
                                                <option value="10"
                                                    t-att-selected="'selected' if pager['limit'] == 10 else None">10
                                                    par page</option>
                                                <option value="20"
                                                    t-att-selected="'selected' if pager['limit'] == 20 else None">20
                                                    par page</option>
                                                <option value="50"
                                                    t-att-selected="'selected' if pager['limit'] == 50 else None">50
                                                    par page</option>
                                                <option value="100"
                                                    t-att-selected="'selected' if pager['limit'] == 100 else None">100
                                                    par page</option>
                                            </select>
                                        </div>
                                        <a href="/eglises/pdf" class="btn btn-outline-primary ms-2">
                                            <i class="fa fa-file-pdf me-1"></i> Exporter PDF </a>
                                        <button class="btn btn-outline-secondary"
                                            onclick="window.print()">
                                            <i class="fa fa-print me-1"></i> Imprimer </button>
                                    </div>
                                </div>

                                <!-- Informations de pagination -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <small class="text-muted"> Affichage de <span
                                                t-esc="pager['offset'] + 1" /> à <span
                                                t-esc="min(pager['offset'] + pager['limit'], pager['total'])" />
                                            sur <span t-esc="pager['total']" /> églises </small>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <small class="text-muted"> Page <span t-esc="pager['page']" />
                                            sur <span t-esc="pager['page_count']" />
                                        </small>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover table-striped"
                                        id="churchesTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th class="text-center">
                                                    <i class="fa fa-church me-1"></i> Église </th>
                                                <th class="text-center">
                                                    <i class="fa fa-map-marker me-1"></i> Région </th>
                                                <th class="text-center">
                                                    <i class="fa fa-user-tie me-1"></i> Pasteur
                                                    Régional </th>
                                                <th class="text-center">
                                                    <i class="fa fa-user-plus me-1"></i> Pasteur
                                                    Principal </th>
                                                <th class="text-center">
                                                    <i class="fa fa-users me-1"></i> Pasteurs
                                                    Adjoints </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="churches" t-as="church">
                                                <tr>
                                                    <td>
                                                        <div class="fw-bold text-primary">
                                                            <i class="fa fa-home me-2 text-muted"></i>
                                                            <span t-esc="church.name" />
                                                        </div>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.region_id.name">
                                                            <span class="badge bg-info text-dark">
                                                                <i class="fa fa-map-pin me-1"></i>
                                                                <span t-esc="church.region_id.name" />
                                                            </span>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i
                                                                    class="fa fa-exclamation-triangle me-1"></i>
                                                                Non définie </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t
                                                            t-if="church.region_id.regional_pastor_id.name">
                                                            <div class="pastor-info">
                                                                <div class="fw-semibold text-dark">
                                                                    <i
                                                                        class="fa fa-user me-1 text-primary"></i>
                                                                    <span
                                                                        t-esc="church.region_id.regional_pastor_id.name" />
                                                                </div>
                                                                <t
                                                                    t-if="church.region_id.regional_pastor_id.phone">
                                                                    <div class="small text-muted">
                                                                        <i class="fa fa-phone me-1"></i>
                                                                        <a
                                                                            t-att-href="'tel:' + church.region_id.regional_pastor_id.phone"
                                                                            class="text-decoration-none">
                                                                            <span
                                                                                t-esc="church.region_id.regional_pastor_id.phone" />
                                                                        </a>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-user-times me-1"></i>
                                                                Non assigné </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.main_pastor_id.name">
                                                            <div class="pastor-info">
                                                                <div class="fw-semibold text-dark">
                                                                    <i
                                                                        class="fa fa-user me-1 text-success"></i>
                                                                    <span
                                                                        t-esc="church.main_pastor_id.name" />
                                                                </div>
                                                                <t
                                                                    t-if="church.main_pastor_id.phone">
                                                                    <div class="small text-muted">
                                                                        <i class="fa fa-phone me-1"></i>
                                                                        <a
                                                                            t-att-href="'tel:' + church.main_pastor_id.phone"
                                                                            class="text-decoration-none">
                                                                            <span
                                                                                t-esc="church.main_pastor_id.phone" />
                                                                        </a>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-user-times me-1"></i>
                                                                Non assigné </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.assistant_pastor_ids">
                                                            <t
                                                                t-foreach="church.assistant_pastor_ids"
                                                                t-as="pastor">
                                                                <div class="assistant-pastor mb-2">
                                                                    <div
                                                                        class="fw-semibold text-dark">
                                                                        <i
                                                                            class="fa fa-user me-1 text-warning"></i>
                                                                        <span t-esc="pastor.name" />
                                                                    </div>
                                                                    <t t-if="pastor.phone">
                                                                        <div
                                                                            class="small text-muted">
                                                                            <i
                                                                                class="fa fa-phone me-1"></i>
                                                                            <a
                                                                                t-att-href="'tel:' + pastor.phone"
                                                                                class="text-decoration-none">
                                                                                <span
                                                                                    t-esc="pastor.phone" />
                                                                            </a>
                                                                        </div>
                                                                    </t>
                                                                </div>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-users-slash me-1"></i>
                                                                Aucun </span>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Pagination -->
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <nav aria-label="Navigation des pages">
                                            <ul class="pagination justify-content-center">
                                                <!-- Première page -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == 1 else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_first']">
                                                        <i class="fa fa-angle-double-left"></i>
                                                    </a>
                                                </li>

                                                <!-- Page précédente -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_previous'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_previous'] or '#'">
                                                        <i class="fa fa-angle-left"></i>
                                                    </a>
                                                </li>

                                                <!-- Pages numériques -->
                                                <t t-foreach="pager['page_range']" t-as="page_num">
                                                    <li
                                                        t-att-class="'page-item' + (' active' if page_num == pager['page'] else '')">
                                                        <a class="page-link"
                                                            t-att-href="pager['url_page'] % page_num">
                                                            <span t-esc="page_num" />
                                                        </a>
                                                    </li>
                                                </t>

                                                <!-- Page suivante -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_next'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_next'] or '#'">
                                                        <i class="fa fa-angle-right"></i>
                                                    </a>
                                                </li>

                                                <!-- Dernière page -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == pager['page_count'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_last']">
                                                        <i class="fa fa-angle-double-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                                <!-- Statistiques en bas -->
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <div class="card bg-light">
                                            <div class="card-body">
                                                <div class="row text-center">
                                                    <div class="col-md-3">
                                                        <h5 class="text-primary">
                                                            <i class="fa fa-church"></i>
                                                            <span t-esc="pager['total']" />
                                                        </h5>
                                                        <small class="text-muted">Total Églises</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-info">
                                                            <i class="fa fa-map-marker"></i>
                                                            <span t-esc="total_regions" />
                                                        </h5>
                                                        <small class="text-muted">Régions</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-success">
                                                            <i class="fa fa-user-plus"></i>
                                                            <span t-esc="total_main_pastors" />
                                                        </h5>
                                                        <small class="text-muted">Pasteurs
                                                            Principaux</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-warning">
                                                            <i class="fa fa-users"></i>
                                                            <span t-esc="total_assistant_pastors" />
                                                        </h5>
                                                        <small class="text-muted">Pasteurs Adjoints</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Script pour la recherche et pagination -->
                <script>
                    // Recherche
                    document.getElementById('searchInput').addEventListener('keyup', function() {
                    const searchTerm = this.value.toLowerCase();
                    const table = document.getElementById('churchesTable');
                    const rows = table.getElementsByTagName('tr');

                    for (let i = 1; i &lt; rows.length; i++) {
                    const row = rows[i];
                    const text = row.textContent.toLowerCase();

                    if (text.includes(searchTerm)) {
                    row.style.display = '';
                    } else {
                    row.style.display = 'none';
                    }
                    }
                    });

                    // Changement du nombre d'éléments par page
                    document.getElementById('itemsPerPage').addEventListener('change', function() {
                    const limit = this.value;
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('limit', limit);
                    currentUrl.searchParams.set('page', 1); // Retour à la première page
                    window.location.href = currentUrl.toString();
                    });
                </script>
            </div>
        </t>
    </template>

    <!-- Formulaire d'inscription complet -->
    <template id="inscription_form" name="Formulaire d'inscription complet">
        <t t-call="website.layout">
            <!-- Remplacement des liens Select2 par Tom Select -->
            <link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.css"
                rel="stylesheet" />
            <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
            <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
                rel="stylesheet" />

            <style>
                @media (max-width: 768px) {
                .date-selectors .row {
                gap: 10px;
                }

                .date-selectors select {
                font-size: 16px; /* Évite le zoom sur iOS */
                padding: 12px;
                border-radius: 8px;
                }

                .date-selectors .col-4 {
                margin-bottom: 10px;
                }
                }

                /* Amélioration générale des sélecteurs */
                .form-select {
                font-size: 16px;
                padding: 12px;
                border: 2px solid #ddd;
                border-radius: 8px;
                background-color: white;
                touch-action: manipulation;
                }

                .form-select:focus {
                border-color: #007bff;
                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
                }

                /* Personnalisation Tom Select */
                .ts-control {
                border: 2px solid #ddd !important;
                border-radius: 8px !important;
                font-size: 16px !important;
                padding: 10px !important;
                min-height: 48px !important;
                }

                .ts-wrapper.multi .ts-control > div {
                background: #007bff !important;
                color: white !important;
                border-radius: 4px !important;
                padding: 2px 6px !important;
                }

                .ts-wrapper.multi .ts-control > div .remove {
                border-left: 1px solid white !important;
                color: white !important;
                }

                .ts-dropdown {
                border: 2px solid #007bff !important;
                border-radius: 8px !important;
                background-color: white !important; /* Ajout de cette ligne */
                }

                .ts-dropdown .option {
                background-color: white !important;
                }

                .ts-dropdown .active {
                background-color: #007bff !important;
                color: white !important;
                }

                .ts-dropdown .selected {
                background-color: #e9ecef !important;
                }

                /* Style spécial pour les sélecteurs de date */
                .date-selector {
                min-height: 48px;
                }

                .searchable-select {
                width: 100%;
                }

                /* Amélioration pour mobile */
                @media (max-width: 768px) {
                .ts-control {
                min-height: 52px !important;
                font-size: 16px !important;
                padding: 14px !important;
                }
                }

                /* Indicateur de champ obligatoire */
                .required-field label::after {
                content: " *";
                color: #dc3545;
                font-weight: bold;
                }

                /* ===== NOUVEAUX STYLES POUR MULTI-SELECT AMÉLIORÉ ===== */

                /* Conteneur principal pour les sélecteurs multiples */
                .multi-select-container {
                border: 2px solid #ddd;
                border-radius: 12px;
                background: white;
                min-height: 56px;
                padding: 8px 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                }

                .multi-select-container:hover {
                border-color: #007bff;
                box-shadow: 0 2px 8px rgba(0, 123, 255, 0.1);
                }

                .multi-select-container.active {
                border-color: #007bff;
                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
                }

                /* Zone des tags sélectionnés */
                .selected-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 6px;
                margin-bottom: 8px;
                }

                .selected-tag {
                background: linear-gradient(135deg, #007bff, #0056b3);
                color: white;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 13px;
                display: flex;
                align-items: center;
                gap: 6px;
                animation: tagAppear 0.3s ease;
                box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
                }

                .selected-tag .remove-tag {
                cursor: pointer;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                width: 18px;
                height: 18px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 10px;
                transition: background 0.2s;
                }

                .selected-tag .remove-tag:hover {
                background: rgba(255, 255, 255, 0.4);
                }

                /* Placeholder quand aucun élément sélectionné */
                .placeholder {
                color: #6c757d;
                font-style: italic;
                font-size: 15px;
                }

                /* Menu déroulant des options */
                .options-dropdown {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border: 2px solid #007bff;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                max-height: 300px;
                overflow-y: auto;
                display: none;
                }

                .options-dropdown.show {
                display: block;
                animation: dropdownAppear 0.3s ease;
                }

                /* Barre de recherche */
                .search-input {
                width: 100%;
                border: none;
                border-bottom: 1px solid #eee;
                padding: 12px 16px;
                font-size: 14px;
                outline: none;
                background: #f8f9fa;
                }

                .search-input:focus {
                background: white;
                border-bottom-color: #007bff;
                }

                /* Options dans le dropdown */
                .option-item {
                padding: 12px 16px;
                cursor: pointer;
                border-bottom: 1px solid #f0f0f0;
                transition: all 0.2s;
                display: flex;
                align-items: center;
                gap: 10px;
                }

                .option-item:hover {
                background: #f8f9fa;
                padding-left: 20px;
                }

                .option-item.selected {
                background: #e3f2fd;
                color: #007bff;
                font-weight: 500;
                }

                .option-item .check-icon {
                opacity: 0;
                transition: opacity 0.2s;
                color: #28a745;
                }

                .option-item.selected .check-icon {
                opacity: 1;
                }

                /* Animations */
                @keyframes tagAppear {
                from { transform: scale(0.8); opacity: 0; }
                to { transform: scale(1); opacity: 1; }
                }

                @keyframes dropdownAppear {
                from { transform: translateY(-10px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
                }

                /* Style pour les sections de groupes spécialisés */
                .specialized-group-section {
                background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 25px;
                border: 1px solid #dee2e6;
                }

                .specialized-group-title {
                font-size: 1.2rem;
                color: #495057;
                margin-bottom: 20px;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
                }

                .specialized-group-title i {
                color: #007bff;
                }

                /* Style pour mobile */
                @media (max-width: 768px) {
                .multi-select-container {
                min-height: 52px;
                padding: 10px 14px;
                }

                .selected-tag {
                font-size: 12px;
                padding: 3px 10px;
                }

                .options-dropdown {
                max-height: 250px;
                }
                }

                /* Message quand aucune option disponible */
                .no-options {
                padding: 20px;
                text-align: center;
                color: #6c757d;
                font-style: italic;
                }
            </style>

            <div class="container mt-5 mb-5">
                <div class="row justify-content-center">
                    <div class="col-md-10">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h3 class="text-center">Formulaire d'identification du juste</h3>
                            </div>

                            <div class="card-body">
                                <t t-if="error">
                                    <div class="alert alert-danger" t-out="error" />
                                </t>

                                <form method="post" class="mt-3" t-att-action="'/inscription'">
                                    <input type="hidden" name="csrf_token"
                                        t-att-value="request.csrf_token()" />

                                    <!-- Section Informations personnelles -->
                                    <h4 class="border-bottom pb-2 mb-3">Informations personnelles</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Nom complet</label>
                                            <input type="text" name="name" class="form-control"
                                                t-att-value="values and values.get('name', '') or ''"
                                                required="required" />
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Email</label>
                                            <input type="email" name="email" class="form-control"
                                                t-att-value="values and values.get('email', '') or ''" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Téléphone</label>
                                            <input type="tel" name="phone" class="form-control"
                                                t-att-value="values and values.get('phone', '') or ''" />
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Whatsapp</label>
                                            <input type="tel" name="mobile" class="form-control"
                                                t-att-value="values and values.get('mobile', '') or ''" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Sexe</label>
                                            <select name="gender"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez --</option>
                                                <option value="male"
                                                    t-att-selected="'selected' if (values and values.get('gender') == 'male') else None">
                                                    Homme</option>
                                                <option value="female"
                                                    t-att-selected="'selected' if (values and values.get('gender') == 'female') else None">
                                                    Femme</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <!-- Date de naissance -->
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Date de naissance</label>
                                            <div class="row date-selectors">
                                                <div class="col-4">
                                                    <select name="birth_day"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Jour</option>
                                                        <t t-foreach="range(1, 32)" t-as="day">
                                                            <option t-att-value="day"
                                                                t-att-selected="'selected' if (values and str(day) == values.get('birth_day')) else None">
                                                                <t t-out="day" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="birth_month"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Mois</option>
                                                        <option value="1"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '1') else None">
                                                            Janvier</option>
                                                        <option value="2"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '2') else None">
                                                            Février</option>
                                                        <option value="3"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '3') else None">
                                                            Mars</option>
                                                        <option value="4"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '4') else None">
                                                            Avril</option>
                                                        <option value="5"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '5') else None">
                                                            Mai</option>
                                                        <option value="6"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '6') else None">
                                                            Juin</option>
                                                        <option value="7"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '7') else None">
                                                            Juillet</option>
                                                        <option value="8"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '8') else None">
                                                            Août</option>
                                                        <option value="9"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '9') else None">
                                                            Septembre</option>
                                                        <option value="10"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '10') else None">
                                                            Octobre</option>
                                                        <option value="11"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '11') else None">
                                                            Novembre</option>
                                                        <option value="12"
                                                            t-att-selected="'selected' if (values and values.get('birth_month') == '12') else None">
                                                            Décembre</option>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="birth_year"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Année</option>
                                                        <t t-foreach="range(2025, 1919, -1)"
                                                            t-as="year">
                                                            <option t-att-value="year"
                                                                t-att-selected="'selected' if (values and str(year) == values.get('birth_year')) else None">
                                                                <t t-out="year" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Situation matrimoniale</label>
                                            <select name="marital_status"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez --</option>
                                                <option value="single"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'single') else None">
                                                    Célibataire</option>
                                                <option value="married"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'married') else None">
                                                    Marié(e)</option>
                                                <option value="divorced"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'divorced') else None">
                                                    Divorcé(e)</option>
                                                <option value="widowed"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'widowed') else None">
                                                    Veuf/Veuve</option>
                                                <option value="separated"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'separated') else None">
                                                    Séparé(e)</option>
                                                <option value="cohabiting"
                                                    t-att-selected="'selected' if (values and values.get('marital_status') == 'cohabiting') else None">En
                                                    concubinage</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Section Lieu d'habitation et profession -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Lieu d'habitation et
                                        profession</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Lieu d'habitation</label>
                                            <input type="text" name="street2" class="form-control"
                                                placeholder="Adresse, quartier, ville"
                                                t-att-value="values and values.get('street2', '') or ''" />
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Profession</label>
                                            <input type="text" name="function"
                                                class="form-control"
                                                placeholder="Votre profession ou métier"
                                                t-att-value="values and values.get('function', '') or ''" />
                                        </div>
                                    </div>

                                    <!-- Section Affiliation -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Affiliation</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Église</label>
                                            <select name="church_id"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez votre église --</option>
                                                <t t-if="churches" t-foreach="churches"
                                                    t-as="church">
                                                    <option t-att-value="church.id"
                                                        t-att-selected="'selected' if (values and str(church.id) == values.get('church_id')) else None">
                                                        <t t-out="church.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <!-- Date de salut -->
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Date de salut</label>
                                            <div class="row date-selectors">
                                                <div class="col-4">
                                                    <select name="arrival_day"
                                                        class="form-select date-selector">
                                                        <option value="">Jour</option>
                                                        <t t-foreach="range(1, 32)" t-as="day">
                                                            <option t-att-value="day"
                                                                t-att-selected="'selected' if (values and str(day) == values.get('arrival_day')) else None">
                                                                <t t-out="day" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="arrival_month"
                                                        class="form-select date-selector">
                                                        <option value="">Mois</option>
                                                        <option value="1"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '1') else None">
                                                            Janvier</option>
                                                        <option value="2"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '2') else None">
                                                            Février</option>
                                                        <option value="3"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '3') else None">
                                                            Mars</option>
                                                        <option value="4"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '4') else None">
                                                            Avril</option>
                                                        <option value="5"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '5') else None">
                                                            Mai</option>
                                                        <option value="6"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '6') else None">
                                                            Juin</option>
                                                        <option value="7"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '7') else None">
                                                            Juillet</option>
                                                        <option value="8"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '8') else None">
                                                            Août</option>
                                                        <option value="9"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '9') else None">
                                                            Septembre</option>
                                                        <option value="10"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '10') else None">
                                                            Octobre</option>
                                                        <option value="11"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '11') else None">
                                                            Novembre</option>
                                                        <option value="12"
                                                            t-att-selected="'selected' if (values and values.get('arrival_month') == '12') else None">
                                                            Décembre</option>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="arrival_year"
                                                        class="form-select date-selector">
                                                        <option value="">Année</option>
                                                        <t t-foreach="range(2025, 1949, -1)"
                                                            t-as="year">
                                                            <option t-att-value="year"
                                                                t-att-selected="'selected' if (values and str(year) == values.get('arrival_year')) else None">
                                                                <t t-out="year" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Fonction(s)</label>
                                            <div class="multi-select-container"
                                                data-name="function_types">
                                                <div class="selected-tags"></div>
                                                <div class="placeholder">Sélectionnez vos fonctions</div>
                                                <div class="options-dropdown">
                                                    <input type="text" class="search-input"
                                                        placeholder="Rechercher..." />
                                                    <div class="options-list">
                                                        <div class="option-item" data-value="member"
                                                            data-text="Membre">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Membre </div>
                                                        <div class="option-item" data-value="pastor"
                                                            data-text="Pasteur">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Pasteur </div>
                                                        <div class="option-item" data-value="elder"
                                                            data-text="Ancien">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Ancien </div>
                                                        <div class="option-item" data-value="deacon"
                                                            data-text="Diacre">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Diacre </div>
                                                        <div class="option-item"
                                                            data-value="missionary"
                                                            data-text="Missionnaire">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Missionnaire </div>
                                                        <div class="option-item" data-value="leader"
                                                            data-text="Responsable">
                                                            <i class="fas fa-check check-icon"></i>
                                                            Responsable </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <input type="hidden" name="function_types"
                                                t-att-data-selected="values.get('function_types', '')" />
                                        </div>
                                    </div>

                                    <!-- Section Groupes -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Affiliation aux
                                        structures</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Tribu</label>
                                            <select name="tribe_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-if="tribes" t-foreach="tribes" t-as="tribe">
                                                    <option t-att-value="tribe.id"
                                                        t-att-selected="'selected' if (values and str(tribe.id) == values.get('tribe_id')) else None">
                                                        <t t-out="tribe.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Cellule de prière</label>
                                            <select name="prayer_cell_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-if="prayer_cells" t-foreach="prayer_cells"
                                                    t-as="cell">
                                                    <option t-att-value="cell.id"
                                                        t-att-selected="'selected' if (values and str(cell.id) == values.get('prayer_cell_id')) else None">
                                                        <t t-out="cell.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Groupe</label>
                                            <select name="group_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-if="groups" t-foreach="groups" t-as="group">
                                                    <option t-att-value="group.id"
                                                        t-att-selected="'selected' if (values and str(group.id) == values.get('group_id')) else None">
                                                        <t t-out="group.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Section Groupes spécialisés AMÉLIORÉE -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Groupes spécialisés</h4>

                                    <!-- Groupe de communication -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-bullhorn"></i> Communication </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">Groupe de communication</label>
                                                <div class="multi-select-container"
                                                    data-name="communication_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos
                                                        groupes de communication</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="communications"
                                                                t-foreach="communications"
                                                                t-as="comm">
                                                                <div class="option-item"
                                                                    t-att-data-value="comm.id"
                                                                    t-att-data-text="comm.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="comm.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="communication_ids"
                                                    t-att-data-selected="values.get('communication_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Groupe artistique -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-paint-brush"></i> Artistique </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">Groupe artistique</label>
                                                <div class="multi-select-container"
                                                    data-name="artistic_group_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos
                                                        groupes artistiques</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="artistic_groups"
                                                                t-foreach="artistic_groups"
                                                                t-as="art">
                                                                <div class="option-item"
                                                                    t-att-data-value="art.id"
                                                                    t-att-data-text="art.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="art.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="artistic_group_ids"
                                                    t-att-data-selected="values.get('artistic_group_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- ONG -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-hands-helping"></i> ONG </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">ONG</label>
                                                <div class="multi-select-container"
                                                    data-name="ngo_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos ONG</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="ngos"
                                                                t-foreach="ngos"
                                                                t-as="ngo">
                                                                <div class="option-item"
                                                                    t-att-data-value="ngo.id"
                                                                    t-att-data-text="ngo.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="ngo.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="ngo_ids"
                                                    t-att-data-selected="values.get('ngo_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Écoles -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-graduation-cap"></i> Écoles </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">Écoles</label>
                                                <div class="multi-select-container"
                                                    data-name="school_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos écoles</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="schools"
                                                                t-foreach="schools"
                                                                t-as="school">
                                                                <div class="option-item"
                                                                    t-att-data-value="school.id"
                                                                    t-att-data-text="school.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="school.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="school_ids"
                                                    t-att-data-selected="values.get('school_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Groupes sportifs -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-running"></i> Sportifs </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">Groupes sportifs</label>
                                                <div class="multi-select-container"
                                                    data-name="sports_group_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos
                                                        groupes sportifs</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="sports_groups"
                                                                t-foreach="sports_groups"
                                                                t-as="sport">
                                                                <div class="option-item"
                                                                    t-att-data-value="sport.id"
                                                                    t-att-data-text="sport.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="sport.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="sports_group_ids"
                                                    t-att-data-selected="values.get('sports_group_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Autres groupes -->
                                    <div class="specialized-group-section">
                                        <h5 class="specialized-group-title">
                                            <i class="fas fa-ellipsis-h"></i> Autres structures </h5>
                                        <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <label class="form-label">Autres groupes</label>
                                                <div class="multi-select-container"
                                                    data-name="other_group_ids">
                                                    <div class="selected-tags"></div>
                                                    <div class="placeholder">Sélectionnez vos
                                                        autres groupes</div>
                                                    <div class="options-dropdown">
                                                        <input type="text" class="search-input"
                                                            placeholder="Rechercher..." />
                                                        <div class="options-list">
                                                            <t t-if="other_groups"
                                                                t-foreach="other_groups"
                                                                t-as="other">
                                                                <div class="option-item"
                                                                    t-att-data-value="other.id"
                                                                    t-att-data-text="other.name">
                                                                    <i
                                                                        class="fas fa-check check-icon"></i>
                                                                    <t t-out="other.name" />
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" name="other_group_ids"
                                                    t-att-data-selected="values.get('other_group_ids', '')" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Section Commentaires -->
                                    <div class="mb-3">
                                        <label class="form-label">Commentaires</label>
                                        <textarea name="comment" class="form-control" rows="3"
                                            t-att-value="values and values.get('comment', '') or ''"></textarea>
                                    </div>

                                    <div class="form-check mb-3 required-field">
                                        <input class="form-check-input" type="checkbox"
                                            name="accept_terms"
                                            id="accept_terms" required="required"
                                            t-att-checked="'checked' if (values and values.get('accept_terms')) else None" />
                                        <label class="form-check-label" for="accept_terms">
                                            J'accepte les <a href="/terms" target="_blank">conditions
                                            d'utilisation</a>
                                        </label>
                                    </div>

                                    <div class="row">
                                        <div class="col-12">
                                            <button type="submit"
                                                class="btn btn-primary btn-lg w-100">
                                                <i class="fas fa-paper-plane me-2"></i> Soumettre
                                                l'inscription </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script> document.addEventListener('DOMContentLoaded', function() { // Initialisation
                Tom Select pour les sélecteurs simples const simpleSelects =
                document.querySelectorAll('.searchable-select');
                simpleSelects.forEach(function(select) { new TomSelect(select, { create: false,
                sortField: { field: "text", direction: "asc" }, allowEmptyOption: true, placeholder:
                "Sélectionner...", searchField: ['text'] }); }); // Initialisation des multi-select
                personnalisés initializeMultiSelect(); // Fonction pour initialiser les multi-select
                function initializeMultiSelect() { const multiSelects =
                document.querySelectorAll('.multi-select-container'); multiSelects.forEach(container
                => { const fieldName = container.dataset.name; const hiddenInput =
                document.querySelector(`input[name="${fieldName}"]`); const selectedTags =
                container.querySelector('.selected-tags'); const placeholder =
                container.querySelector('.placeholder'); const dropdown =
                container.querySelector('.options-dropdown'); const searchInput =
                container.querySelector('.search-input'); const optionsList =
                container.querySelector('.options-list'); const options =
                container.querySelectorAll('.option-item'); let selectedValues = []; //
                Préremplissage si des valeurs sont déjà présentes const initial =
                hiddenInput.dataset.selected; if (initial) { const initialValues =
                initial.split(',').map(val => val.trim()).filter(val => val !== '');
                initialValues.forEach(val => { const option =
                container.querySelector(`.option-item[data-value="${val}"]`); if (option) { const
                text = option.dataset.text; selectedValues.push(val); createTag(val, text);
                updateOptionState(val, true); } }); updateHiddenInput(); updatePlaceholder(); } //
                Gestion du clic sur le conteneur container.addEventListener('click', function(e) {
                if (!e.target.closest('.remove-tag')) { toggleDropdown(); } }); // Fermer le
                dropdown si clic à l'extérieur document.addEventListener('click', function(e) { if
                (!container.contains(e.target)) { closeDropdown(); } }); // Gestion de la recherche
                searchInput.addEventListener('input', function() {
                filterOptions(this.value.toLowerCase()); }); // Gestion du clic sur les options
                options.forEach(option => { option.addEventListener('click', function() { const
                value = this.dataset.value; const text = this.dataset.text; if
                (selectedValues.includes(value)) { removeValue(value); } else { addValue(value,
                text); } }); }); function toggleDropdown() { dropdown.classList.toggle('show');
                container.classList.toggle('active'); if (dropdown.classList.contains('show')) {
                searchInput.focus(); } } function closeDropdown() {
                dropdown.classList.remove('show'); container.classList.remove('active');
                searchInput.value = ''; filterOptions(''); } function addValue(value, text) { if
                (!selectedValues.includes(value)) { selectedValues.push(value); createTag(value,
                text); updateHiddenInput(); updatePlaceholder(); updateOptionState(value, true); } }
                function removeValue(value) { const index = selectedValues.indexOf(value); if (index
                > -1) { selectedValues.splice(index, 1); removeTag(value); updateHiddenInput();
                updatePlaceholder(); updateOptionState(value, false); } } function createTag(value,
                text) { const tag = document.createElement('div'); tag.className = 'selected-tag';
                tag.dataset.value = value; tag.innerHTML = ` <span>${text}</span>
                                <span
                    class="remove-tag" data-value="${value}">×</span> `;
                tag.querySelector('.remove-tag').addEventListener('click', function(e) {
                e.stopPropagation(); removeValue(value); }); selectedTags.appendChild(tag); }
                function removeTag(value) { const tag =
                selectedTags.querySelector(`[data-value="${value}"]`); if (tag) { tag.remove(); } }
                function updateHiddenInput() { hiddenInput.value = selectedValues.join(','); }
                function updatePlaceholder() { placeholder.style.display = selectedValues.length ===
                0 ? 'block' : 'none'; } function updateOptionState(value, selected) { const option =
                container.querySelector(`.option-item[data-value="${value}"]`); if (option) { if
                (selected) { option.classList.add('selected'); } else {
                option.classList.remove('selected'); } } } function filterOptions(searchTerm) {
                options.forEach(option => { const text = option.dataset.text.toLowerCase(); if
                (text.includes(searchTerm)) { option.style.display = 'flex'; } else {
                option.style.display = 'none'; } }); // Vérifier s'il y a des options visibles const
                visibleOptions = Array.from(options).filter(opt => opt.style.display !== 'none');
                const existingNoOptions = optionsList.querySelector('.no-options'); if
                (visibleOptions.length === 0 &amp;&amp; !existingNoOptions) { const noOptionsDiv =
                document.createElement('div'); noOptionsDiv.className = 'no-options';
                noOptionsDiv.textContent = 'Aucune option trouvée';
                optionsList.appendChild(noOptionsDiv); } else if (visibleOptions.length > 0
                &amp;&amp; existingNoOptions) { existingNoOptions.remove(); } } // Initialiser
                l'état updatePlaceholder(); }); } // Validation personnalisée du formulaire const
                form = document.querySelector('form'); form.addEventListener('submit', function(e) {
                // Validation des champs requis const requiredFields =
                form.querySelectorAll('[required]'); let isValid = true;
                requiredFields.forEach(field => { if (!field.value.trim()) { isValid = false;
                field.classList.add('is-invalid'); // Supprimer la classe d'erreur après
                modification field.addEventListener('input', function() {
                this.classList.remove('is-invalid'); }); } }); // Validation de la date de naissance
                const birthDay = document.querySelector('[name="birth_day"]'); const birthMonth =
                document.querySelector('[name="birth_month"]'); const birthYear =
                document.querySelector('[name="birth_year"]'); if (!birthDay.value ||
                !birthMonth.value || !birthYear.value) { isValid = false; [birthDay, birthMonth,
                birthYear].forEach(field => { if (!field.value) { field.classList.add('is-invalid');
                } }); if (isValid === false) { alert('Veuillez remplir tous les champs obligatoires,
                y compris la date de naissance complète.'); } } // Validation des conditions
                d'utilisation const termsCheckbox = document.querySelector('#accept_terms'); if
                (!termsCheckbox.checked) { isValid = false;
                termsCheckbox.classList.add('is-invalid'); alert('Vous devez accepter les conditions
                d\'utilisation pour continuer.'); } if (!isValid) { e.preventDefault(); // Faire
                défiler jusqu'au premier champ invalide const firstInvalid =
                form.querySelector('.is-invalid'); if (firstInvalid) { firstInvalid.scrollIntoView({
                behavior: 'smooth', block: 'center' }); } } else { // Afficher un indicateur de
                chargement const submitBtn = form.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Envoi en
                cours...'; submitBtn.disabled = true; } }); // Gestion responsive des sélecteurs de
                date function handleDateSelectorsResize() { const dateSelectors =
                document.querySelectorAll('.date-selectors'); dateSelectors.forEach(selector => { if
                (window.innerWidth &lt;= 768) { selector.classList.add('mobile-layout'); } else {
                selector.classList.remove('mobile-layout'); } }); } // Appel initial et sur
                redimensionnement handleDateSelectorsResize(); window.addEventListener('resize',
                handleDateSelectorsResize); // Animation d'entrée const card =
                document.querySelector('.card'); card.style.opacity = '0'; card.style.transform =
                'translateY(20px)'; setTimeout(() => { card.style.transition = 'all 0.5s ease';
                card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, 100); //
                Sauvegarde automatique en local storage (optionnel) const formFields =
                form.querySelectorAll('input, select, textarea'); formFields.forEach(field => { //
                Restaurer les valeurs sauvegardées const savedValue =
                localStorage.getItem(`form_${field.name}`); if (savedValue &amp;&amp; !field.value)
                { field.value = savedValue; } // Sauvegarder les modifications
                field.addEventListener('change', function() {
                localStorage.setItem(`form_${field.name}`, field.value); }); }); // Nettoyer le
                localStorage après soumission réussie form.addEventListener('submit', function() {
                if (this.checkValidity()) { formFields.forEach(field => {
                localStorage.removeItem(`form_${field.name}`); }); } }); }); </script>
        </t>
    </template>

    <!-- Page de succès après inscription -->
    <template id="inscription_success" name="Inscription réussie">
        <t t-call="website.layout">
            <div class="container mt-5 mb-5">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card text-center">
                            <div class="card-header bg-success text-white">
                                <h3>Inscription enregistrée</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-4">
                                    <i class="fa fa-check-circle fa-5x text-success"></i>
                                </div>
                                <h4 class="card-title">Merci <t t-esc="partner.name" /> !</h4>
                                <p class="card-text">
                                    Votre inscription a bien été enregistrée. Un responsable va la
                                    valider prochainement.
                                </p>
                                <!-- <p>
                                    Vous recevrez un email de confirmation une fois votre compte
                                    activé.
                                </p> -->
                                <a href="/" class="btn btn-primary">
                                    Retour à l'accueil
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="portal_my_home_inherit" name="My Portal" inherit_id="portal.portal_my_home">
        <xpath expr="//div[@id='portal_common_category']" position="after">
            <div class="o_portal_category row g-2 mt-3">
                <t t-call="portal.portal_docs_entry" t-if="False" />
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon"
                        t-value="'/random_team_generator/static/src/img/user-profile.svg'" />
                    <t t-set="title">Mon profil</t>
                    <t t-set="text">Configurez vos paramètres de profil</t>
                    <t t-set="url" t-value="'/my/profile'" />
                    <t t-set="config_card" t-value="True" />
                </t>
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon" t-value="'/web/static/src/img/icons/children.svg'" />
                    <t t-set="title">Mes enfants (père)</t>
                    <t t-set="text">Liste des enfants pour lesquels vous êtes déclaré comme père</t>
                    <t t-set="url" t-value="'/my/fathered-children'" />
                    <t t-set="config_card" t-value="True" />
                </t>
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon" t-value="'/web/static/src/img/icons/children.svg'" />
                    <t t-set="title">Mes enfants (mère)</t>
                    <t t-set="text">Liste des enfants pour lesquels vous êtes déclarée comme mère</t>
                    <t t-set="url" t-value="'/my/mothered-children'" />
                    <t t-set="config_card" t-value="True" />
                </t>
            </div>
        </xpath>
    </template>

    <template id="portal_my_profile" name="Mon profil">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mon profil</h1>

                <form method="post" action="/my/profile/update">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Nom</label>
                            <input type="text" name="name" class="form-control"
                                t-att-value="partner.name" />
                            <t t-if="error.get('name')">
                                <div class="text-danger">Ce champ est obligatoire</div>
                            </t>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Sexe</label>
                            <select name="gender" class="form-control">
                                <option value="">-- Sélectionnez --</option>
                                <option value="male"
                                    t-att-selected="'selected' if partner.gender == 'male' else None">
                                    Homme</option>
                                <option value="female"
                                    t-att-selected="'selected' if partner.gender == 'female' else None">
                                    Femme</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Date de naissance</label>
                            <input type="date" name="birthdate" class="form-control"
                                t-att-value="partner.birthdate and partner.birthdate.strftime('%Y-%m-%d') or ''" />
                            <t t-if="error.get('birthdate')">
                                <div class="text-danger">Format de date invalide (JJ/MM/AAAA)</div>
                            </t>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Âge</label>
                            <input type="text" class="form-control" t-att-value="partner.age"
                                disabled="disabled" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Situation matrimoniale</label>
                            <select name="marital_status" class="form-control">
                                <option value="single"
                                    t-att-selected="'selected' if partner.marital_status == 'single' else None">
                                    Célibataire</option>
                                <option value="married"
                                    t-att-selected="'selected' if partner.marital_status == 'married' else None">
                                    Marié(e)</option>
                                <option value="divorced"
                                    t-att-selected="'selected' if partner.marital_status == 'divorced' else None">
                                    Divorcé(e)</option>
                                <option value="widowed"
                                    t-att-selected="'selected' if partner.marital_status == 'widowed' else None">
                                    Veuf/Veuve</option>
                                <option value="separated"
                                    t-att-selected="'selected' if partner.marital_status == 'separated' else None">
                                    Séparé(e)</option>
                                <option value="cohabiting"
                                    t-att-selected="'selected' if partner.marital_status == 'cohabiting' else None">
                                    Concubinage</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Père</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.father_id.name" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Mère</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.mother_id.name" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Organisation</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.parent_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Église</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.church_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Date de salut</label>
                            <input type="date" name="arrival_date" class="form-control"
                                t-att-value="partner.arrival_date and partner.arrival_date.strftime('%Y-%m-%d') or ''" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Tribu</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.tribe_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Groupe</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.group_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Cellule de prière</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.prayer_cell_id.name" disabled="disabled" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Père</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.father_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Mère</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.mother_id.name" disabled="disabled" />
                        </div>
                    </div>

                    <t t-if="error_message">
                        <div class="alert alert-danger">
                            <t t-foreach="error_message" t-as="msg">
                                <div>
                                    <t t-esc="msg" />
                                </div>
                            </t>
                        </div>
                    </t>

                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                </form>
            </div>
        </t>
    </template>
    <template id="portal_contact_list" name="Liste de mes enfants">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants</h1>
                <a href="/my/contacts/new" class="btn btn-primary">Ajouter</a>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Âge</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.age" />
                                </td>
                                <td>
                                    <a t-att-href="'/my/contacts/%d/edit' % child.id"
                                        class="btn btn-secondary btn-sm">Modifier</a>
                                    <a t-att-href="'/my/contacts/%d/delete' % child.id"
                                        class="btn btn-danger btn-sm">Supprimer</a>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
    <template id="portal_contact_form" name="Formulaire Contact">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>
                    <t t-if="create">Créer</t>
                    <t t-else="">Modifier</t> un contact </h1>
                <form method="post">
                    <input type="text" name="name" class="form-control mb-2" placeholder="Nom"
                        t-att-value="contact.name if not create else ''" />
                    <select name="gender" class="form-control mb-2">
                        <option value="male"
                            t-att-selected="'male' == (contact.gender if not create else '')">Homme</option>
                        <option value="female"
                            t-att-selected="'female' == (contact.gender if not create else '')">
                            Femme</option>
                    </select>
                    <input type="date" name="birthdate" class="form-control mb-2"
                        t-att-value="contact.birthdate if not create else ''" />
                    <select name="marital_status" class="form-control mb-3">
                        <option value="single">Célibataire</option>
                        <option value="married">Marié(e)</option>
                        <option value="divorced">Divorcé(e)</option>
                        <option value="widowed">Veuf/Veuve</option>
                        <option value="separated">Séparé(e)</option>
                        <option value="cohabiting">Concubinage</option>
                    </select>
                    <button type="submit" class="btn btn-success">Enregistrer</button>
                </form>
            </div>
        </t>
    </template>
    <template id="portal_fathered_children" name="Mes enfants (père)">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants (père)</h1>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Date de naissance</th>
                            <th>Âge</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.birthdate" />
                                </td>
                                <td><t t-esc="child.age" /> ans</td>
                            </tr>
                        </t>
                    </tbody>
                </table>
                <div class="mt-4 text-center">
                    <a href="/my" class="btn btn-secondary">
                        <i class="fa fa-arrow-left me-2"></i> Retour au tableau de bord </a>
                </div>
            </div>
        </t>
    </template>
    <template id="portal_mothered_children" name="Mes enfants (mère)">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants (mère)</h1>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Date de naissance</th>
                            <th>Âge</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.birthdate" />
                                </td>
                                <td><t t-esc="child.age" /> ans</td>
                            </tr>
                        </t>
                    </tbody>
                </table>
                <div class="mt-4 text-center">
                    <a href="/my" class="btn btn-secondary">
                        <i class="fa fa-arrow-left me-2"></i> Retour au tableau de bord </a>
                </div>
            </div>
        </t>
    </template>
</odoo>