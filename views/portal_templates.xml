<odoo>
    <record id="menu_inscription_ebng" model="website.menu">
        <field name="name">S'inscrire</field>
        <field name="url">/inscription</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">50</field>
    </record>
    <record id="menu_church_list" model="website.menu">
        <field name="name">Liste des églises</field>
        <field name="url">/eglises</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">60</field>
    </record>
    <record id="menu_prayer_cell_list" model="website.menu">
        <field name="name">Cellules de prière</field>
        <field name="url">/cellules-priere</field>
        <field name="parent_id" ref="website.main_menu" />
        <field name="sequence">70</field>
    </record>

    <!-- Template pour la vue web des cellules de prière -->
    <template id="prayer_cell_list" name="Liste des cellules de prière">
        <t t-call="website.layout">
            <div class="container mt-4 mb-5">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card shadow-lg">
                            <div class="card-header bg-gradient-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h3 class="mb-0">
                                            <i class="fa fa-heart me-1"></i> Liste des Cellules de Prière
                                        </h3>
                                        <small class="text-light">
                                            <i class="fa fa-calendar me-1"></i> Dernière mise à jour :
                                            <span t-esc="datetime.datetime.now().strftime('%d/%m/%Y à %H:%M')" />
                                        </small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <span class="badge bg-light text-primary fs-6">
                                            <i class="fa fa-users me-1"></i>
                                            <span id="totalCells" t-esc="len(prayer_cells)" /> cellule(s) -
                                            <span id="totalMembers" t-esc="total_members" /> membre(s)
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <!-- Barre de recherche et contrôles -->
                                <div class="row mb-3">
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="searchInput"
                                                placeholder="Rechercher une cellule, église, tribu ou membre..." />
                                            <button class="btn btn-outline-secondary" id="clearSearch">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <div class="btn-group" role="group">
                                            <a href="/cellules-priere/pdf" class="btn btn-outline-primary">
                                                <i class="fa fa-file-pdf me-1"></i> PDF
                                            </a>
                                            <button class="btn btn-outline-secondary" onclick="window.print()">
                                                <i class="fa fa-print me-1"></i> Imprimer
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Contrôles de pagination supérieurs -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-center">
                                            <label class="me-2">Afficher</label>
                                            <select id="rowsPerPage" class="form-select form-select-sm" style="width: auto;">
                                                <option value="10">10</option>
                                                <option value="25">25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                                <option value="all">Tout</option>
                                            </select>
                                            <span class="ms-2">cellules</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <nav aria-label="Pagination supérieure">
                                            <ul class="pagination pagination-sm mb-0" id="paginationTop">
                                                <!-- Généré par JavaScript -->
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                                <!-- Tableau principal -->
                                <div class="table-responsive">
                                    <table class="table table-hover table-striped" id="cellsTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th class="text-center sortable" data-sort="name">
                                                    <i class="fa fa-heart me-1"></i> Cellule
                                                    <i class="fa fa-sort sort-icon"></i>
                                                </th>
                                                <th class="text-center sortable" data-sort="church">
                                                    <i class="fa fa-church me-1"></i> Église
                                                    <i class="fa fa-sort sort-icon"></i>
                                                </th>
                                                <th class="text-center sortable" data-sort="tribe">
                                                    <i class="fa fa-sitemap me-1"></i> Tribu
                                                    <i class="fa fa-sort sort-icon"></i>
                                                </th>
                                                <th class="text-center sortable" data-sort="members">
                                                    <i class="fa fa-users me-1"></i> Membres
                                                    <i class="fa fa-sort sort-icon"></i>
                                                </th>
                                                <th class="text-center sortable" data-sort="leader">
                                                    <i class="fa fa-user-tie me-1"></i> Responsable
                                                    <i class="fa fa-sort sort-icon"></i>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="tableBody">
                                            <t t-foreach="prayer_cells" t-as="cell">
                                                <tr class="data-row" 
                                                    t-att-data-name="cell.name"
                                                    t-att-data-church="cell.prayer_cell_church_id.name or ''"
                                                    t-att-data-tribe="cell.prayer_cell_tribe_id.name or ''"
                                                    t-att-data-member-count="len(cell.prayer_cell_members)"
                                                    t-att-data-leader="cell.prayer_cell_leader_id.name or ''">
                                                    <td>
                                                        <div class="fw-bold text-primary">
                                                            <i class="fa fa-home me-2 text-muted"></i>
                                                            <span t-esc="cell.name" />
                                                        </div>
                                                    </td>

                                                    <td class="text-center">
                                                        <t t-if="cell.prayer_cell_church_id.name">
                                                            <span class="badge bg-info text-dark">
                                                                <i class="fa fa-map-pin me-1"></i>
                                                                <span t-esc="cell.prayer_cell_church_id.name" />
                                                            </span>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-exclamation-triangle me-1"></i>
                                                                Non définie
                                                            </span>
                                                        </t>
                                                    </td>

                                                    <td class="text-center">
                                                        <t t-if="cell.prayer_cell_tribe_id.name">
                                                            <span class="badge bg-secondary">
                                                                <i class="fa fa-map-pin me-1"></i>
                                                                <span t-esc="cell.prayer_cell_tribe_id.name" />
                                                            </span>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-exclamation-triangle me-1"></i>
                                                                Non définie
                                                            </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="cell.prayer_cell_members">
                                                            <div class="member-count-badge mb-2">
                                                                <span class="badge bg-primary">
                                                                    <i class="fa fa-users me-1"></i>
                                                                    <span t-esc="len(cell.prayer_cell_members)" /> membre(s)
                                                                </span>
                                                            </div>
                                                            <t t-foreach="cell.prayer_cell_members" t-as="member">
                                                                <div class="member-info mb-2">
                                                                    <div class="fw-semibold text-dark">
                                                                        <i class="fa fa-user me-1"></i>
                                                                        <span t-esc="member.name" />
                                                                    </div>
                                                                    <t t-if="member.phone">
                                                                        <div class="small text-primary">
                                                                            <i class="fa fa-phone me-1"></i>
                                                                            <a t-att-href="'tel:' + member.phone" 
                                                                            class="text-decoration-none">
                                                                                <span t-esc="member.phone" />
                                                                            </a>
                                                                        </div>
                                                                    </t>
                                                                </div>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-users-slash me-1"></i>
                                                                Aucun membre
                                                            </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="cell.prayer_cell_leader_id.name">
                                                            <div class="leader-info">
                                                                <div class="fw-semibold text-dark">
                                                                    <i class="fa fa-user-tie me-1 text-success"></i>
                                                                    <span t-esc="cell.prayer_cell_leader_id.name" />
                                                                </div>
                                                                <t t-if="cell.prayer_cell_leader_id.phone">
                                                                    <div class="small text-primary">
                                                                        <i class="fa fa-phone me-1"></i>
                                                                        <a t-att-href="'tel:' + cell.prayer_cell_leader_id.phone" 
                                                                        class="text-decoration-none">
                                                                            <span t-esc="cell.prayer_cell_leader_id.phone" />
                                                                        </a>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-user-times me-1"></i>
                                                                Non assigné
                                                            </span>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Message d'absence de résultats -->
                                <div id="noResults" class="text-center py-5" style="display: none;">
                                    <div class="text-muted">
                                        <i class="fa fa-search fa-3x mb-3"></i>
                                        <h5>Aucun résultat trouvé</h5>
                                        <p>Essayez de modifier vos critères de recherche</p>
                                    </div>
                                </div>

                                <!-- Informations de pagination inférieures -->
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="dataTables_info text-muted" id="pageInfo">
                                            Affichage de 1 à <span t-esc="min(10, len(prayer_cells))" /> sur 
                                            <span t-esc="len(prayer_cells)" /> cellules
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <nav aria-label="Pagination inférieure">
                                            <ul class="pagination mb-0" id="paginationBottom">
                                                <!-- Généré par JavaScript -->
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CSS personnalisé -->
            <style>
                .sortable {
                    cursor: pointer;
                    user-select: none;
                    position: relative;
                }
                
                .sortable:hover {
                    background-color: rgba(255, 255, 255, 0.1);
                }
                
                .sort-icon {
                    opacity: 0.5;
                    font-size: 0.8em;
                    margin-left: 5px;
                }
                
                .sortable.asc .sort-icon::before {
                    content: "\f0de";
                    opacity: 1;
                }
                
                .sortable.desc .sort-icon::before {
                    content: "\f0dd";
                    opacity: 1;
                }
                
                .member-info {
                    border-left: 3px solid #007bff;
                    padding-left: 10px;
                    margin-bottom: 8px;
                }
                
                .leader-info {
                    border-left: 3px solid #28a745;
                    padding-left: 10px;
                }
                
                .member-count-badge {
                    text-align: center;
                }
                
                .pagination-sm .page-link {
                    padding: 0.25rem 0.5rem;
                    font-size: 0.875rem;
                }
                
                .table-hover tbody tr:hover {
                    background-color: rgba(0, 123, 255, 0.05);
                }
                
                .data-row {
                    transition: all 0.2s ease;
                }
                
                .bg-gradient-primary {
                    background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
                    color: white;
                }
            </style>

            <!-- Scripts pour la pagination, recherche et tri -->
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    // Configuration initiale
                    const rowsPerPageSelect = document.getElementById('rowsPerPage');
                    const tableBody = document.getElementById('tableBody');
                    const rows = Array.from(tableBody.getElementsByClassName('data-row'));
                    const paginationTop = document.getElementById('paginationTop');
                    const paginationBottom = document.getElementById('paginationBottom');
                    const pageInfo = document.getElementById('pageInfo');
                    const searchInput = document.getElementById('searchInput');
                    const clearSearch = document.getElementById('clearSearch');
                    const noResults = document.getElementById('noResults');
                    const table = document.getElementById('cellsTable');
                    
                    let currentPage = 1;
                    let rowsPerPage = parseInt(rowsPerPageSelect.value);
                    let filteredRows = rows;
                    let sortColumn = null;
                    let sortDirection = 'asc';

                    // Fonction de tri
                    function sortTable(column) {
                        if (sortColumn === column) {
                            sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                        } else {
                            sortColumn = column;
                            sortDirection = 'asc';
                        }

                        // Mettre à jour les icônes de tri
                        document.querySelectorAll('.sortable').forEach(th => {
                            th.classList.remove('asc', 'desc');
                        });
                        document.querySelector(`[data-sort="${column}"]`).classList.add(sortDirection);

                        // Trier les lignes filtrées
                        filteredRows.sort((a, b) => {
                            let aValue = '';
                            let bValue = '';

                            switch(column) {
                                case 'name':
                                    aValue = a.dataset.name || '';
                                    bValue = b.dataset.name || '';
                                    break;
                                case 'church':
                                    aValue = a.dataset.church || '';
                                    bValue = b.dataset.church || '';
                                    break;
                                case 'tribe':
                                    aValue = a.dataset.tribe || '';
                                    bValue = b.dataset.tribe || '';
                                    break;
                                case 'members':
                                    aValue = parseInt(a.dataset.memberCount) || 0;
                                    bValue = parseInt(b.dataset.memberCount) || 0;
                                    break;
                                case 'leader':
                                    aValue = a.dataset.leader || '';
                                    bValue = b.dataset.leader || '';
                                    break;
                            }

                            if (typeof aValue === 'number' &amp;&amp; typeof bValue === 'number') {
                                return sortDirection === 'asc' ? aValue - bValue : bValue - aValue;
                            } else {
                                const comparison = aValue.localeCompare(bValue, 'fr', { sensitivity: 'base' });
                                return sortDirection === 'asc' ? comparison : -comparison;
                            }
                        });

                        currentPage = 1;
                        updateDisplay();
                    }

                    // Fonction pour mettre à jour l'affichage
                    function updateDisplay() {
                        // Filtrer par recherche
                        const searchTerm = searchInput.value.toLowerCase().trim();
                        filteredRows = rows.filter(row => {
                            if (searchTerm === '') return true;
                            return row.textContent.toLowerCase().includes(searchTerm);
                        });

                        // Mettre à jour les totaux
                        document.getElementById('totalCells').textContent = filteredRows.length;
                        const totalMembers = filteredRows.reduce((sum, row) => {
                            return sum + (parseInt(row.dataset.memberCount) || 0);
                        }, 0);
                        document.getElementById('totalMembers').textContent = totalMembers;

                        // Gestion de l'affichage "Tout"
                        if (rowsPerPage === 'all') {
                            currentPage = 1;
                            displayRows(filteredRows);
                            updatePageInfo(1, filteredRows.length, filteredRows.length);
                            generatePaginationControls(1);
                        } else {
                            // Pagination normale
                            const pageCount = Math.ceil(filteredRows.length / rowsPerPage);
                            currentPage = Math.min(currentPage, pageCount) || 1;

                            const start = (currentPage - 1) * rowsPerPage;
                            const end = start + rowsPerPage;
                            const pageRows = filteredRows.slice(start, end);

                            displayRows(pageRows);
                            updatePageInfo(start + 1, Math.min(end, filteredRows.length), filteredRows.length);
                            generatePaginationControls(pageCount);
                        }

                        // Afficher/masquer le message d'absence de résultats
                        noResults.style.display = filteredRows.length === 0 ? 'block' : 'none';
                        table.style.display = filteredRows.length === 0 ? 'none' : 'table';
                    }

                    // Fonction pour afficher les lignes
                    function displayRows(rowsToShow) {
                        rows.forEach(row => row.style.display = 'none');
                        rowsToShow.forEach(row => row.style.display = '');
                    }

                    // Fonction pour mettre à jour les informations de page
                    function updatePageInfo(start, end, total) {
                        const displayedStart = total > 0 ? start : 0;
                        pageInfo.innerHTML = `Affichage de ${displayedStart} à ${end} sur ${total} cellules`;
                    }

                    // Fonction pour générer les contrôles de pagination
                    function generatePaginationControls(pageCount) {
                        if (pageCount &lt;= 1) {
                            paginationTop.innerHTML = '';
                            paginationBottom.innerHTML = '';
                            return;
                        }

                        const paginationHTML = [];
                        const maxVisiblePages = 5;

                        // Bouton Précédent
                        paginationHTML.push(`
                            <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                                <a class="page-link" href="#" data-page="${currentPage - 1}">
                                    <i class="fa fa-chevron-left"></i>
                                </a>
                            </li>
                        `);

                        // Calcul des pages visibles
                        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
                        let endPage = Math.min(pageCount, startPage + maxVisiblePages - 1);

                        if (endPage - startPage + 1 &lt; maxVisiblePages) {
                            startPage = Math.max(1, endPage - maxVisiblePages + 1);
                        }

                        // Première page et ellipses
                        if (startPage > 1) {
                            paginationHTML.push(`
                                <li class="page-item">
                                    <a class="page-link" href="#" data-page="1">1</a>
                                </li>
                            `);
                            if (startPage > 2) {
                                paginationHTML.push(`
                                    <li class="page-item disabled">
                                        <span class="page-link">...</span>
                                    </li>
                                `);
                            }
                        }

                        // Pages numérotées
                        for (let i = startPage; i &lt;= endPage; i++) {
                            paginationHTML.push(`
                                <li class="page-item ${i === currentPage ? 'active' : ''}">
                                    <a class="page-link" href="#" data-page="${i}">${i}</a>
                                </li>
                            `);
                        }

                        // Dernière page et ellipses
                        if (endPage &lt; pageCount) {
                            if (endPage &lt; pageCount - 1) {
                                paginationHTML.push(`
                                    <li class="page-item disabled">
                                        <span class="page-link">...</span>
                                    </li>
                                `);
                            }
                            paginationHTML.push(`
                                <li class="page-item">
                                    <a class="page-link" href="#" data-page="${pageCount}">${pageCount}</a>
                                </li>
                            `);
                        }

                        // Bouton Suivant
                        paginationHTML.push(`
                            <li class="page-item ${currentPage === pageCount ? 'disabled' : ''}">
                                <a class="page-link" href="#" data-page="${currentPage + 1}">
                                    <i class="fa fa-chevron-right"></i>
                                </a>
                            </li>
                        `);

                        // Appliquer aux deux paginations
                        const htmlString = paginationHTML.join('');
                        paginationTop.innerHTML = htmlString;
                        paginationBottom.innerHTML = htmlString;

                        // Ajouter les écouteurs d'événements
                        document.querySelectorAll('.page-link').forEach(link => {
                            link.addEventListener('click', function(e) {
                                e.preventDefault();
                                const page = parseInt(this.getAttribute('data-page'));
                                if (!isNaN(page) &amp;&amp; page >= 1 &amp;&amp; page &amp;= pageCount) {
                                    currentPage = page;
                                    updateDisplay();
                                    // Scroll vers le haut
                                    document.querySelector('.card-header').scrollIntoView({ 
                                        behavior: 'smooth' 
                                    });
                                }
                            });
                        });
                    }

                    // Écouteurs d'événements
                    rowsPerPageSelect.addEventListener('change', function() {
                        rowsPerPage = this.value === 'all' ? 'all' : parseInt(this.value);
                        currentPage = 1;
                        updateDisplay();
                    });

                    searchInput.addEventListener('input', function() {
                        currentPage = 1;
                        updateDisplay();
                    });

                    clearSearch.addEventListener('click', function() {
                        searchInput.value = '';
                        currentPage = 1;
                        updateDisplay();
                    });

                    // Écouteurs pour le tri
                    document.querySelectorAll('.sortable').forEach(th => {
                        th.addEventListener('click', function() {
                            sortTable(this.dataset.sort);
                        });
                    });

                    // Raccourcis clavier
                    document.addEventListener('keydown', function(e) {
                        if (e.ctrlKey &amp;&amp; e.key === 'f') {
                            e.preventDefault();
                            searchInput.focus();
                        }
                    });

                    // Initialisation
                    updateDisplay();
                });
            </script>
        </t>
    </template>

    <!-- Template pour la vue web -->
    <template id="church_list" name="Liste des églises">
        <t t-call="website.layout">
            <div class="container mt-4 mb-5">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card shadow-lg">
                            <div class="card-header bg-gradient-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h3 class="mb-0">
                                            <i class="fa fa-church me-1"></i> Liste des Églises </h3>
                                        <small class="text-light">
                                            <i class="fa fa-calendar me-1"></i> Dernière mise à jour
                                            : <span
                                                t-esc="datetime.datetime.now().strftime('%d/%m/%Y à %H:%M')" />
                                        </small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <span class="badge bg-light text-primary fs-6">
                                            <i class="fa fa-home me-1"></i>
                                        <span
                                                t-esc="pager['total']" /> église(s) </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="searchInput"
                                                placeholder="Rechercher une église, région ou pasteur..." />
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <div class="btn-group">
                                            <select class="form-select" id="itemsPerPage"
                                                style="width: auto;">
                                                <option value="10"
                                                    t-att-selected="'selected' if pager['limit'] == 10 else None">10
                                                    par page</option>
                                                <option value="20"
                                                    t-att-selected="'selected' if pager['limit'] == 20 else None">20
                                                    par page</option>
                                                <option value="50"
                                                    t-att-selected="'selected' if pager['limit'] == 50 else None">50
                                                    par page</option>
                                                <option value="100"
                                                    t-att-selected="'selected' if pager['limit'] == 100 else None">100
                                                    par page</option>
                                            </select>
                                        </div>
                                        <a href="/eglises/pdf" class="btn btn-outline-primary ms-2">
                                            <i class="fa fa-file-pdf me-1"></i> Exporter PDF </a>
                                        <button class="btn btn-outline-secondary"
                                            onclick="window.print()">
                                            <i class="fa fa-print me-1"></i> Imprimer </button>
                                    </div>
                                </div>

                                <!-- Informations de pagination -->
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <small class="text-muted"> Affichage de <span
                                                t-esc="pager['offset'] + 1" /> à <span
                                                t-esc="min(pager['offset'] + pager['limit'], pager['total'])" />
                                            sur <span t-esc="pager['total']" /> églises </small>
                                    </div>
                                    <div class="col-md-6 text-end">
                                        <small class="text-muted"> Page <span t-esc="pager['page']" />
                                            sur <span t-esc="pager['page_count']" />
                                        </small>
                                    </div>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-hover table-striped"
                                        id="churchesTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th class="text-center">
                                                    <i class="fa fa-church me-1"></i> Église </th>
                                                <th class="text-center">
                                                    <i class="fa fa-map-marker me-1"></i> Région </th>
                                                <th class="text-center">
                                                    <i class="fa fa-user-tie me-1"></i> Pasteur
                                                    Régional </th>
                                                <th class="text-center">
                                                    <i class="fa fa-user-plus me-1"></i> Pasteur
                                                    Principal </th>
                                                <th class="text-center">
                                                    <i class="fa fa-users me-1"></i> Pasteurs
                                                    Adjoints </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="churches" t-as="church">
                                                <tr>
                                                    <td>
                                                        <div class="fw-bold text-primary">
                                                            <i class="fa fa-home me-2 text-muted"></i>
                                                            <span t-esc="church.name" />
                                                        </div>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.region_id.name">
                                                            <span class="badge bg-info text-dark">
                                                                <i class="fa fa-map-pin me-1"></i>
                                                                <span t-esc="church.region_id.name" />
                                                            </span>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i
                                                                    class="fa fa-exclamation-triangle me-1"></i>
                                                                Non définie </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t
                                                            t-if="church.region_id.regional_pastor_id.name">
                                                            <div class="pastor-info">
                                                                <div class="fw-semibold text-dark">
                                                                    <i
                                                                        class="fa fa-user me-1 text-primary"></i>
                                                                    <span
                                                                        t-esc="church.region_id.regional_pastor_id.name" />
                                                                </div>
                                                                <t
                                                                    t-if="church.region_id.regional_pastor_id.phone">
                                                                    <div class="small text-muted">
                                                                        <i class="fa fa-phone me-1"></i>
                                                                        <a t-att-href="'tel:' + church.region_id.regional_pastor_id.phone" 
                                                                            class="text-decoration-none">
                                                                            <span t-esc="church.region_id.regional_pastor_id.phone" />
                                                                        </a>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-user-times me-1"></i>
                                                                Non assigné </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.main_pastor_id.name">
                                                            <div class="pastor-info">
                                                                <div class="fw-semibold text-dark">
                                                                    <i
                                                                        class="fa fa-user me-1 text-success"></i>
                                                                    <span
                                                                        t-esc="church.main_pastor_id.name" />
                                                                </div>
                                                                <t
                                                                    t-if="church.main_pastor_id.phone">
                                                                    <div class="small text-muted">
                                                                        <i class="fa fa-phone me-1"></i>
                                                                        <a t-att-href="'tel:' + church.main_pastor_id.phone" 
                                                                            class="text-decoration-none">
                                                                            <span t-esc="church.main_pastor_id.phone" />
                                                                        </a>
                                                                    </div>
                                                                </t>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-user-times me-1"></i>
                                                                Non assigné </span>
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-if="church.assistant_pastor_ids">
                                                            <t
                                                                t-foreach="church.assistant_pastor_ids"
                                                                t-as="pastor">
                                                                <div class="assistant-pastor mb-2">
                                                                    <div
                                                                        class="fw-semibold text-dark">
                                                                        <i
                                                                            class="fa fa-user me-1 text-warning"></i>
                                                                        <span t-esc="pastor.name" />
                                                                    </div>
                                                                    <t t-if="pastor.phone">
                                                                        <div
                                                                            class="small text-muted">
                                                                            <i
                                                                                class="fa fa-phone me-1"></i>
                                                                            <a t-att-href="'tel:' + pastor.phone" 
                                                                            class="text-decoration-none"><span
                                                                                t-esc="pastor.phone" />
                                                                            </a>
                                                                        </div>
                                                                    </t>
                                                                </div>
                                                            </t>
                                                        </t>
                                                        <t t-else="">
                                                            <span class="text-muted fst-italic">
                                                                <i class="fa fa-users-slash me-1"></i>
                                                                Aucun </span>
                                                        </t>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Pagination -->
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <nav aria-label="Navigation des pages">
                                            <ul class="pagination justify-content-center">
                                                <!-- Première page -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == 1 else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_first']">
                                                        <i class="fa fa-angle-double-left"></i>
                                                    </a>
                                                </li>

                                                <!-- Page précédente -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_previous'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_previous'] or '#'">
                                                        <i class="fa fa-angle-left"></i>
                                                    </a>
                                                </li>

                                                <!-- Pages numériques -->
                                                <t t-foreach="pager['page_range']" t-as="page_num">
                                                    <li
                                                        t-att-class="'page-item' + (' active' if page_num == pager['page'] else '')">
                                                        <a class="page-link"
                                                            t-att-href="pager['url_page'] % page_num">
                                                            <span t-esc="page_num" />
                                                        </a>
                                                    </li>
                                                </t>

                                                <!-- Page suivante -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if not pager['url_next'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_next'] or '#'">
                                                        <i class="fa fa-angle-right"></i>
                                                    </a>
                                                </li>

                                                <!-- Dernière page -->
                                                <li
                                                    t-att-class="'page-item' + (' disabled' if pager['page'] == pager['page_count'] else '')">
                                                    <a class="page-link"
                                                        t-att-href="pager['url_last']">
                                                        <i class="fa fa-angle-double-right"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                                <!-- Statistiques en bas -->
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <div class="card bg-light">
                                            <div class="card-body">
                                                <div class="row text-center">
                                                    <div class="col-md-3">
                                                        <h5 class="text-primary">
                                                            <i class="fa fa-church"></i>
                                                            <span t-esc="pager['total']" />
                                                        </h5>
                                                        <small class="text-muted">Total Églises</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-info">
                                                            <i class="fa fa-map-marker"></i>
                                                            <span t-esc="total_regions" />
                                                        </h5>
                                                        <small class="text-muted">Régions</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-success">
                                                            <i class="fa fa-user-plus"></i>
                                                            <span t-esc="total_main_pastors" />
                                                        </h5>
                                                        <small class="text-muted">Pasteurs
                                                            Principaux</small>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <h5 class="text-warning">
                                                            <i class="fa fa-users"></i>
                                                            <span t-esc="total_assistant_pastors" />
                                                        </h5>
                                                        <small class="text-muted">Pasteurs Adjoints</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Script pour la recherche et pagination -->
                <script>
                    // Recherche
                    document.getElementById('searchInput').addEventListener('keyup', function() {
                    const searchTerm = this.value.toLowerCase();
                    const table = document.getElementById('churchesTable');
                    const rows = table.getElementsByTagName('tr');

                    for (let i = 1; i &lt; rows.length; i++) {
                    const row = rows[i];
                    const text = row.textContent.toLowerCase();

                    if (text.includes(searchTerm)) {
                    row.style.display = '';
                    } else {
                    row.style.display = 'none';
                    }
                    }
                    });

                    // Changement du nombre d'éléments par page
                    document.getElementById('itemsPerPage').addEventListener('change', function() {
                    const limit = this.value;
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('limit', limit);
                    currentUrl.searchParams.set('page', 1); // Retour à la première page
                    window.location.href = currentUrl.toString();
                    });
                </script>
            </div>
        </t>
    </template>
    <!-- Formulaire d'inscription complet -->
    <template id="inscription_form" name="Formulaire d'inscription complet">
        <t t-call="website.layout">
            <link rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
            <link rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
            <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
            <style>
                @media (max-width: 768px) {
                .date-selectors .row {
                gap: 10px;
                }

                .date-selectors select {
                font-size: 16px; /* Évite le zoom sur iOS */
                padding: 12px;
                border-radius: 8px;
                }

                .date-selectors .col-4 {
                margin-bottom: 10px;
                }
                }

                /* Amélioration générale des sélecteurs */
                .form-select {
                font-size: 16px;
                padding: 12px;
                border: 2px solid #ddd;
                border-radius: 8px;
                background-color: white;
                touch-action: manipulation;
                }

                .form-select:focus {
                border-color: #007bff;
                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
                }

                /* Personnalisation Select2 */
                .select2-container--bootstrap-5 .select2-selection {
                min-height: 48px;
                border: 2px solid #ddd;
                border-radius: 8px;
                font-size: 16px;
                }

                .select2-container--bootstrap-5 .select2-selection--single
                .select2-selection__rendered {
                padding: 12px;
                line-height: 1.5;
                }

                .select2-container--bootstrap-5 .select2-selection--single .select2-selection__arrow
                {
                height: 46px;
                right: 12px;
                }

                .select2-container--bootstrap-5.select2-container--focus .select2-selection {
                border-color: #007bff;
                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
                }

                .select2-dropdown {
                border: 2px solid #007bff;
                border-radius: 8px;
                }

                .select2-search--dropdown .select2-search__field {
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 8px 12px;
                font-size: 14px;
                }

                .select2-results__option {
                padding: 10px 12px;
                font-size: 14px;
                }

                .select2-results__option--highlighted {
                background-color: #007bff;
                color: white;
                }

                /* Style spécial pour les sélecteurs de date */
                .date-selector {
                min-height: 48px;
                }

                .searchable-select {
                width: 100%;
                }

                /* Amélioration pour mobile */
                @media (max-width: 768px) {
                .select2-container--bootstrap-5 .select2-selection {
                min-height: 52px;
                font-size: 16px;
                }

                .select2-container--bootstrap-5 .select2-selection--single
                .select2-selection__rendered {
                padding: 14px;
                }

                .select2-container--bootstrap-5 .select2-selection--single .select2-selection__arrow
                {
                height: 50px;
                }
                }

                /* Indicateur de champ obligatoire */
                .required-field label::after {
                content: " *";
                color: #dc3545;
                font-weight: bold;
                }
            </style>

            <div class="container mt-5 mb-5">
                <div class="row justify-content-center">
                    <div class="col-md-10">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h3 class="text-center">Formulaire d'identification du juste</h3>
                            </div>

                            <div class="card-body">
                                <t t-if="error">
                                    <div class="alert alert-danger" t-esc="error" />
                                </t>

                                <form method="post" class="mt-3">
                                    <!-- Section Informations personnelles -->
                                    <h4 class="border-bottom pb-2 mb-3">Informations personnelles</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Nom complet</label>
                                            <input type="text" name="name" class="form-control"
                                                t-att-value="values.get('name', '')"
                                                required="required" />
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Email</label>
                                            <input type="email" name="email" class="form-control"
                                                t-att-value="values.get('email', '')" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Téléphone</label>
                                            <input type="tel" name="phone" class="form-control"
                                                t-att-value="values.get('phone', '')" />
                                        </div>
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Sexe</label>
                                            <select name="gender"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez --</option>
                                                <option value="male"
                                                    t-att-selected="'male' == values.get('gender', '')">
                                                    Homme</option>
                                                <option value="female"
                                                    t-att-selected="'female' == values.get('gender', '')">
                                                    Femme</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <!-- Date de naissance -->
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Date de naissance</label>
                                            <div class="row date-selectors">
                                                <div class="col-4">
                                                    <select name="birth_day"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Jour</option>
                                                        <t t-foreach="range(1, 32)" t-as="day">
                                                            <option t-att-value="day"
                                                                t-att-selected="str(day) == values.get('birth_day', '')">
                                                                <t t-esc="day" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="birth_month"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Mois</option>
                                                        <option value="1"
                                                            t-att-selected="'1' == values.get('birth_month', '')">
                                                            Janvier</option>
                                                        <option value="2"
                                                            t-att-selected="'2' == values.get('birth_month', '')">
                                                            Février</option>
                                                        <option value="3"
                                                            t-att-selected="'3' == values.get('birth_month', '')">
                                                            Mars</option>
                                                        <option value="4"
                                                            t-att-selected="'4' == values.get('birth_month', '')">
                                                            Avril</option>
                                                        <option value="5"
                                                            t-att-selected="'5' == values.get('birth_month', '')">
                                                            Mai</option>
                                                        <option value="6"
                                                            t-att-selected="'6' == values.get('birth_month', '')">
                                                            Juin</option>
                                                        <option value="7"
                                                            t-att-selected="'7' == values.get('birth_month', '')">
                                                            Juillet</option>
                                                        <option value="8"
                                                            t-att-selected="'8' == values.get('birth_month', '')">
                                                            Août</option>
                                                        <option value="9"
                                                            t-att-selected="'9' == values.get('birth_month', '')">
                                                            Septembre</option>
                                                        <option value="10"
                                                            t-att-selected="'10' == values.get('birth_month', '')">
                                                            Octobre</option>
                                                        <option value="11"
                                                            t-att-selected="'11' == values.get('birth_month', '')">
                                                            Novembre</option>
                                                        <option value="12"
                                                            t-att-selected="'12' == values.get('birth_month', '')">
                                                            Décembre</option>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="birth_year"
                                                        class="form-select date-selector"
                                                        required="required">
                                                        <option value="">Année</option>
                                                        <t t-foreach="range(2025, 1919, -1)"
                                                            t-as="year">
                                                            <option t-att-value="year"
                                                                t-att-selected="str(year) == values.get('birth_year', '')">
                                                                <t t-esc="year" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Situation matrimoniale</label>
                                            <select name="marital_status"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez --</option>
                                                <option value="single"
                                                    t-att-selected="'single' == values.get('marital_status', '')">
                                                    Célibataire</option>
                                                <option value="married"
                                                    t-att-selected="'married' == values.get('marital_status', '')">
                                                    Marié(e)</option>
                                                <option value="divorced"
                                                    t-att-selected="'divorced' == values.get('marital_status', '')">
                                                    Divorcé(e)</option>
                                                <option value="widowed"
                                                    t-att-selected="'widowed' == values.get('marital_status', '')">
                                                    Veuf/Veuve</option>
                                                <option value="separated"
                                                    t-att-selected="'separated' == values.get('marital_status', '')">
                                                    Séparé(e)</option>
                                                <option value="cohabiting"
                                                    t-att-selected="'cohabiting' == values.get('marital_status', '')">En
                                                    concubinage</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Section Lieu d'habitation et profession -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Lieu d'habitation et
                                        profession</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Lieu d'habitation</label>
                                            <input type="text" name="street2" class="form-control"
                                                placeholder="Adresse, quartier, ville"
                                                t-att-value="values.get('street2', '')" />
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Profession</label>
                                            <input type="text" name="profession"
                                                class="form-control"
                                                placeholder="Votre profession ou métier"
                                                t-att-value="values.get('function', '')" />
                                        </div>
                                    </div>

                                    <!-- Section Affiliation -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Affiliation</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3 required-field">
                                            <label class="form-label">Église</label>
                                            <select name="church_id"
                                                class="form-select searchable-select"
                                                required="required">
                                                <option value="">-- Sélectionnez votre église --</option>
                                                <t t-foreach="churches" t-as="church">
                                                    <option t-att-value="church.id"
                                                        t-att-selected="str(church.id) == values.get('church_id', '')">
                                                        <t t-esc="church.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <!-- Date de salut -->
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Date de salut</label>
                                            <div class="row date-selectors">
                                                <div class="col-4">
                                                    <select name="arrival_day"
                                                        class="form-select date-selector">
                                                        <option value="">Jour</option>
                                                        <t t-foreach="range(1, 32)" t-as="day">
                                                            <option t-att-value="day"
                                                                t-att-selected="str(day) == values.get('arrival_day', '')">
                                                                <t t-esc="day" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="arrival_month"
                                                        class="form-select date-selector">
                                                        <option value="">Mois</option>
                                                        <option value="1"
                                                            t-att-selected="'1' == values.get('arrival_month', '')">
                                                            Janvier</option>
                                                        <option value="2"
                                                            t-att-selected="'2' == values.get('arrival_month', '')">
                                                            Février</option>
                                                        <option value="3"
                                                            t-att-selected="'3' == values.get('arrival_month', '')">
                                                            Mars</option>
                                                        <option value="4"
                                                            t-att-selected="'4' == values.get('arrival_month', '')">
                                                            Avril</option>
                                                        <option value="5"
                                                            t-att-selected="'5' == values.get('arrival_month', '')">
                                                            Mai</option>
                                                        <option value="6"
                                                            t-att-selected="'6' == values.get('arrival_month', '')">
                                                            Juin</option>
                                                        <option value="7"
                                                            t-att-selected="'7' == values.get('arrival_month', '')">
                                                            Juillet</option>
                                                        <option value="8"
                                                            t-att-selected="'8' == values.get('arrival_month', '')">
                                                            Août</option>
                                                        <option value="9"
                                                            t-att-selected="'9' == values.get('arrival_month', '')">
                                                            Septembre</option>
                                                        <option value="10"
                                                            t-att-selected="'10' == values.get('arrival_month', '')">
                                                            Octobre</option>
                                                        <option value="11"
                                                            t-att-selected="'11' == values.get('arrival_month', '')">
                                                            Novembre</option>
                                                        <option value="12"
                                                            t-att-selected="'12' == values.get('arrival_month', '')">
                                                            Décembre</option>
                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <select name="arrival_year"
                                                        class="form-select date-selector">
                                                        <option value="">Année</option>
                                                        <t t-foreach="range(2025, 1949, -1)"
                                                            t-as="year">
                                                            <option t-att-value="year"
                                                                t-att-selected="str(year) == values.get('arrival_year', '')">
                                                                <t t-esc="year" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Fonction</label>
                                            <select name="function_type"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <option value="member"
                                                    t-att-selected="'member' == values.get('function_type', '')">
                                                    Membre</option>
                                                <option value="pastor"
                                                    t-att-selected="'pastor' == values.get('function_type', '')">
                                                    Pasteur</option>
                                                <option value="elder"
                                                    t-att-selected="'elder' == values.get('function_type', '')">
                                                    Ancien</option>
                                                <option value="deacon"
                                                    t-att-selected="'deacon' == values.get('function_type', '')">
                                                    Diacre</option>
                                                <option value="missionary"
                                                    t-att-selected="'missionary' == values.get('function_type', '')">
                                                    Missionnaire</option>
                                                <option value="leader"
                                                    t-att-selected="'leader' == values.get('function_type', '')">
                                                    Responsable</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Section Groupes -->
                                    <h4 class="border-bottom pb-2 mb-3 mt-4">Affiliation aux
                                        structures</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Tribu</label>
                                            <select name="tribe_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-foreach="tribes" t-as="tribe">
                                                    <option t-att-value="tribe.id"
                                                        t-att-selected="str(tribe.id) == values.get('tribe_id', '')">
                                                        <t t-esc="tribe.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Cellule de prière</label>
                                            <select name="prayer_cell_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-foreach="prayer_cells" t-as="cell">
                                                    <option t-att-value="cell.id"
                                                        t-att-selected="str(cell.id) == values.get('prayer_cell_id', '')">
                                                        <t t-esc="cell.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Groupe</label>
                                            <select name="group_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-foreach="groups" t-as="group">
                                                    <option t-att-value="group.id"
                                                        t-att-selected="str(group.id) == values.get('group_id', '')">
                                                        <t t-esc="group.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Autre structure</label>
                                            <select name="academy_id"
                                                class="form-select searchable-select">
                                                <option value="">-- Sélectionnez --</option>
                                                <t t-foreach="academies" t-as="academy">
                                                    <option t-att-value="academy.id"
                                                        t-att-selected="str(academy.id) == values.get('academy_id', '')">
                                                        <t t-esc="academy.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Section Commentaires -->
                                    <div class="mb-3">
                                        <label class="form-label">Commentaires</label>
                                        <textarea name="comment" class="form-control" rows="3"
                                            t-att-value="values.get('comment', '')"></textarea>
                                    </div>

                                    <div class="form-check mb-3">
                                        <input type="checkbox" class="form-check-input"
                                            id="accept_terms" name="accept_terms"
                                            required="required" />
                                        <label class="form-check-label" for="accept_terms">
                                            J'accepte les conditions d'utilisation et la politique
                                            de confidentialité
                                        </label>
                                    </div>

                                    <div class="text-center mt-4">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fa fa-paper-plane me-2"></i> Soumettre
                                            l'inscription </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Page de succès après inscription -->
    <template id="inscription_success" name="Inscription réussie">
        <t t-call="website.layout">
            <div class="container mt-5 mb-5">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card text-center">
                            <div class="card-header bg-success text-white">
                                <h3>Inscription enregistrée</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-4">
                                    <i class="fa fa-check-circle fa-5x text-success"></i>
                                </div>
                                <h4 class="card-title">Merci <t t-esc="partner.name" /> !</h4>
                                <p class="card-text">
                                    Votre inscription a bien été enregistrée. Un responsable va la
                                    valider prochainement.
                                </p>
                                <p>
                                    Vous recevrez un email de confirmation une fois votre compte
                                    activé.
                                </p>
                                <a href="/" class="btn btn-primary">
                                    Retour à l'accueil
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="portal_my_home_inherit" name="My Portal" inherit_id="portal.portal_my_home">
        <xpath expr="//div[@id='portal_common_category']" position="after">
            <div class="o_portal_category row g-2 mt-3">
                <t t-call="portal.portal_docs_entry" t-if="False" />
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon"
                        t-value="'/random_team_generator/static/src/img/user-profile.svg'" />
                    <t t-set="title">Mon profil</t>
                    <t t-set="text">Configurez vos paramètres de profil</t>
                    <t t-set="url" t-value="'/my/profile'" />
                    <t t-set="config_card" t-value="True" />
                </t>
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon" t-value="'/web/static/src/img/icons/children.svg'" />
                    <t t-set="title">Mes enfants (père)</t>
                    <t t-set="text">Liste des enfants pour lesquels vous êtes déclaré comme père</t>
                    <t t-set="url" t-value="'/my/fathered-children'" />
                    <t t-set="config_card" t-value="True" />
                </t>
                <t t-call="portal.portal_docs_entry">
                    <t t-set="icon" t-value="'/web/static/src/img/icons/children.svg'" />
                    <t t-set="title">Mes enfants (mère)</t>
                    <t t-set="text">Liste des enfants pour lesquels vous êtes déclarée comme mère</t>
                    <t t-set="url" t-value="'/my/mothered-children'" />
                    <t t-set="config_card" t-value="True" />
                </t>
            </div>
        </xpath>
    </template>

    <template id="portal_my_profile" name="Mon profil">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mon profil</h1>

                <form method="post" action="/my/profile/update">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Nom</label>
                            <input type="text" name="name" class="form-control"
                                t-att-value="partner.name" />
                            <t t-if="error.get('name')">
                                <div class="text-danger">Ce champ est obligatoire</div>
                            </t>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Sexe</label>
                            <select name="gender" class="form-control">
                                <option value="">-- Sélectionnez --</option>
                                <option value="male"
                                    t-att-selected="'selected' if partner.gender == 'male' else None">
                                    Homme</option>
                                <option value="female"
                                    t-att-selected="'selected' if partner.gender == 'female' else None">
                                    Femme</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Date de naissance</label>
                            <input type="date" name="birthdate" class="form-control"
                                t-att-value="partner.birthdate and partner.birthdate.strftime('%Y-%m-%d') or ''" />
                            <t t-if="error.get('birthdate')">
                                <div class="text-danger">Format de date invalide (JJ/MM/AAAA)</div>
                            </t>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Âge</label>
                            <input type="text" class="form-control" t-att-value="partner.age"
                                disabled="disabled" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Situation matrimoniale</label>
                            <select name="marital_status" class="form-control">
                                <option value="single"
                                    t-att-selected="'selected' if partner.marital_status == 'single' else None">
                                    Célibataire</option>
                                <option value="married"
                                    t-att-selected="'selected' if partner.marital_status == 'married' else None">
                                    Marié(e)</option>
                                <option value="divorced"
                                    t-att-selected="'selected' if partner.marital_status == 'divorced' else None">
                                    Divorcé(e)</option>
                                <option value="widowed"
                                    t-att-selected="'selected' if partner.marital_status == 'widowed' else None">
                                    Veuf/Veuve</option>
                                <option value="separated"
                                    t-att-selected="'selected' if partner.marital_status == 'separated' else None">
                                    Séparé(e)</option>
                                <option value="cohabiting"
                                    t-att-selected="'selected' if partner.marital_status == 'cohabiting' else None">
                                    Concubinage</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Père</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.father_id.name" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Mère</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.mother_id.name" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Organisation</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.parent_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Église</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.church_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Date de salut</label>
                            <input type="date" name="arrival_date" class="form-control"
                                t-att-value="partner.arrival_date and partner.arrival_date.strftime('%Y-%m-%d') or ''" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Tribu</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.tribe_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Groupe</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.group_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Cellule de prière</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.prayer_cell_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Structure</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.academy_id.name" disabled="disabled" />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Père</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.father_id.name" disabled="disabled" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Mère</label>
                            <input type="text" class="form-control"
                                t-att-value="partner.mother_id.name" disabled="disabled" />
                        </div>
                    </div>

                    <t t-if="error_message">
                        <div class="alert alert-danger">
                            <t t-foreach="error_message" t-as="msg">
                                <div>
                                    <t t-esc="msg" />
                                </div>
                            </t>
                        </div>
                    </t>

                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                </form>
            </div>
        </t>
    </template>
    <template id="portal_contact_list" name="Liste de mes enfants">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants</h1>
                <a href="/my/contacts/new" class="btn btn-primary">Ajouter</a>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Âge</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.age" />
                                </td>
                                <td>
                                    <a t-att-href="'/my/contacts/%d/edit' % child.id"
                                        class="btn btn-secondary btn-sm">Modifier</a>
                                    <a t-att-href="'/my/contacts/%d/delete' % child.id"
                                        class="btn btn-danger btn-sm">Supprimer</a>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
    <template id="portal_contact_form" name="Formulaire Contact">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>
                    <t t-if="create">Créer</t>
                    <t t-else="">Modifier</t> un contact </h1>
                <form method="post">
                    <input type="text" name="name" class="form-control mb-2" placeholder="Nom"
                        t-att-value="contact.name if not create else ''" />
                    <select name="gender" class="form-control mb-2">
                        <option value="male"
                            t-att-selected="'male' == (contact.gender if not create else '')">Homme</option>
                        <option value="female"
                            t-att-selected="'female' == (contact.gender if not create else '')">
                            Femme</option>
                    </select>
                    <input type="date" name="birthdate" class="form-control mb-2"
                        t-att-value="contact.birthdate if not create else ''" />
                    <select name="marital_status" class="form-control mb-3">
                        <option value="single">Célibataire</option>
                        <option value="married">Marié(e)</option>
                        <option value="divorced">Divorcé(e)</option>
                        <option value="widowed">Veuf/Veuve</option>
                        <option value="separated">Séparé(e)</option>
                        <option value="cohabiting">Concubinage</option>
                    </select>
                    <button type="submit" class="btn btn-success">Enregistrer</button>
                </form>
            </div>
        </t>
    </template>
    <template id="portal_fathered_children" name="Mes enfants (père)">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants (père)</h1>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Date de naissance</th>
                            <th>Âge</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.birthdate" />
                                </td>
                                <td><t t-esc="child.age" /> ans</td>
                            </tr>
                        </t>
                    </tbody>
                </table>
                <div class="mt-4 text-center">
                    <a href="/my" class="btn btn-secondary">
                        <i class="fa fa-arrow-left me-2"></i> Retour au tableau de bord </a>
                </div>
            </div>
        </t>
    </template>
    <template id="portal_mothered_children" name="Mes enfants (mère)">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Mes enfants (mère)</h1>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Sexe</th>
                            <th>Date de naissance</th>
                            <th>Âge</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="children" t-as="child">
                            <tr>
                                <td>
                                    <t t-esc="child.name" />
                                </td>
                                <td>
                                    <t t-esc="child.gender" />
                                </td>
                                <td>
                                    <t t-esc="child.birthdate" />
                                </td>
                                <td><t t-esc="child.age" /> ans</td>
                            </tr>
                        </t>
                    </tbody>
                </table>
                <div class="mt-4 text-center">
                    <a href="/my" class="btn btn-secondary">
                        <i class="fa fa-arrow-left me-2"></i> Retour au tableau de bord </a>
                </div>
            </div>
        </t>
    </template>
</odoo>